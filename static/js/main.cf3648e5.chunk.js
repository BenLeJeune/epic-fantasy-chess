(this.webpackJsonpchessproject=this.webpackJsonpchessproject||[]).push([[0],[,function(e,t,a){"use strict";a.d(t,"a",(function(){return X}));var n=a(57),i=a(37),s=a(8),r=a(7),o=a(9);class c extends s.a{constructor(){super(...arguments),this.materialValue=3,this.engineValue=330,this.valueGrid=o.a,this.evaluate=e=>this.engineValue,this.shortName=c.shortName,this.longName=c.longName,this.movesDescription="Moves any number of squares diagonally.",this.specialMoves=[],this.notes="Is colour-bound.",this.categories=["Minor","Bishop","Colour-bound","FIDE"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.a)(t,e,X.Bishop*n,[e=>0!==X.getFile(e)?e+7:e,e=>0!==X.getFile(e)?e-9:e,e=>7!==X.getFile(e)?e+9:e,e=>7!==X.getFile(e)?e-7:e],a)),i}}}c.shortName="B",c.longName="Bishop";class l extends s.a{constructor(){super(...arguments),this.materialValue=5,this.engineValue=500,this.valueGrid=o.f,this.evaluate=e=>this.engineValue,this.shortName=l.shortName,this.longName=l.longName,this.movesDescription="Moves any number of squares diagonally or vertically.",this.specialMoves=['If this starts on the first or eighth file, neither pieces have moved, and this doesn\'t cause the king to move through check, can "castle" with the king.'],this.notes="",this.categories=["Major","Rook","Castler","FIDE"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.a)(t,e,X.Rook*n,[e=>0!==X.getRank(e)?e-8:e,e=>0!==X.getFile(e)?e-1:e,e=>7!==X.getRank(e)?e+8:e,e=>7!==X.getFile(e)?e+1:e],a)),i}}}l.shortName="R",l.longName="Rook";class d extends s.a{constructor(){super(...arguments),this.materialValue=9,this.engineValue=900,this.valueGrid=o.e,this.evaluate=e=>this.engineValue,this.shortName=d.shortName,this.longName=d.longName,this.movesDescription="Moves any number of squares diagonally, horizontally and vertically - combining the moves of the Rook and the Bishop.",this.specialMoves=[],this.notes="",this.categories=["Major","Queen","FIDE"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.a)(t,e,X.Queen*n,[e=>0!==X.getFile(e)?e+7:e,e=>0!==X.getFile(e)?e-9:e,e=>7!==X.getFile(e)?e+9:e,e=>7!==X.getFile(e)?e-7:e,e=>0!==X.getRank(e)?e-8:e,e=>0!==X.getFile(e)?e-1:e,e=>7!==X.getRank(e)?e+8:e,e=>7!==X.getFile(e)?e+1:e],a)),i}}}d.shortName="Q",d.longName="Queen";class h extends s.a{constructor(){super(...arguments),this.materialValue=999,this.engineValue=2e4,this.valueGrid=o.b,this.evaluate=e=>this.engineValue,this.shortName=h.shortName,this.longName=h.longName,this.movesDescription="Moves one square in any direction.",this.specialMoves=["If a Castler and this piece have not moved, and you don't pass through check to do so, you may move the king two squares towards the castler, placing the castler on the other side."],this.notes="Cannot move into check, and if possible must move out of check. If checkmated, you lose the game.",this.categories=["Major","King"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0,s=[];s.push(...Object(r.b)(t,e,X.King*n,[e=>0!==X.getFile(e)?e+7:e,e=>0!==X.getFile(e)?e-9:e,e=>7!==X.getFile(e)?e+9:e,e=>7!==X.getFile(e)?e-7:e,e=>0!==X.getRank(e)?e-8:e,e=>0!==X.getFile(e)?e-1:e,e=>7!==X.getRank(e)?e+8:e,e=>7!==X.getFile(e)?e+1:e],a));const o=n>0?4:60,c=n>0?0:56,l=n>0?7:63;if(e===o){if(0===i.filter((e=>e.moving===X.King*n||e.captured===X.King*n)).length){if((t[l]===X.Rook*n||t[l]===X.Bede*n)&&t[l-1]===X.None&&t[l-2]===X.None){0===i.filter((e=>e.from===l||e.to===l)).length&&s.push({from:o,to:l-1,special:"CASTLE"})}if(t[c]===X.Rook*n&&t[c+1]===X.None&&t[c+2]===X.None&&t[c+3]===X.None){0===i.filter((e=>e.from===c||e.to===c)).length&&s.push({from:o,to:c+2,special:"CASTLE"})}if(t[c]===X.Bede*n&&t[c+1]===X.None&&t[c+2]===X.None&&t[c+3]===X.None){0===i.filter((e=>e.from===c||e.to===c)).length&&s.push({from:o,to:c+1,special:"CASTLE"})}}}return s}}}h.shortName="K",h.longName="King";var u=a(32),g=a.p+"static/media/pawn_white.50273cc6.svg",m=a.p+"static/media/pawn_black.be5d44ca.svg",p=a.p+"static/media/knight_white.145b8796.svg",b=a.p+"static/media/knight_black.d714eeb4.svg",f=a.p+"static/media/bishop_white.8333f40f.svg",j=a.p+"static/media/bishop_black.629fc057.svg",v=a.p+"static/media/rook_white.ba9ac487.svg",O=a.p+"static/media/rook_black.fd4e01f5.svg",x=a.p+"static/media/queen_white.7a1aecff.svg",N=a.p+"static/media/queen_black.cf388bf4.svg",y=a.p+"static/media/king_white.3f959aab.svg",k=a.p+"static/media/king_black.6c8cc8fa.svg";class w extends s.a{constructor(){super(...arguments),this.materialValue=3,this.engineValue=300,this.valueGrid=o.c,this.evaluate=e=>this.engineValue,this.shortName=w.shortName,this.longName=w.longName,this.movesDescription="Can move one square horizontally/vertically, or leap two squares diagonally.",this.specialMoves=[],this.notes="Can leap over pieces.",this.categories=["Minor","Knight","Crusader"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.b)(t,e,X.Waffle*n,[e=>X.getRank(e)>=1?e-8:e,e=>X.getRank(e)<=6?e+8:e,e=>X.getFile(e)>=1?e-1:e,e=>X.getFile(e)<=6?e+1:e,e=>X.getRank(e)<=5&&X.getFile(e)<=5?e+18:e,e=>X.getRank(e)<=5&&X.getFile(e)>=2?e+14:e,e=>X.getRank(e)>=2&&X.getFile(e)<=5?e-14:e,e=>X.getRank(e)>=2&&X.getFile(e)>=2?e-18:e],a)),i}}}w.shortName="WA",w.longName="Waffle";class C extends s.a{constructor(){super(...arguments),this.materialValue=5,this.engineValue=530,this.valueGrid=o.f,this.evaluate=e=>this.engineValue,this.shortName=C.shortName,this.longName=C.longName,this.movesDescription="Moves as a bishop, or can leap 2 squares vertically or horizontally.",this.specialMoves=['If neither pieces have moved, and this doesn\'t cause the king to move through check, can "castle" with the king.',"As this piece is colourbound, the king can move up to three squares to keep it on its colour."],this.notes="",this.categories=["Minor","Rook","Crusader"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...(new c).getLegalMoves(e,t,a,n)),i.push(...Object(r.b)(t,e,X.Bede*n,[e=>X.getRank(e)>=2?e-16:e,e=>X.getRank(e)<=5?e+16:e,e=>X.getFile(e)>=2?e-2:e,e=>X.getFile(e)<=5?e+2:e],a)),i}}}C.shortName="BD",C.longName="Bede";class T extends s.a{constructor(){super(...arguments),this.materialValue=4,this.engineValue=400,this.valueGrid=o.a,this.evaluate=e=>this.engineValue,this.shortName=T.shortName,this.longName=T.longName,this.movesDescription="Can leap two squares vertically or horizontally, or one or two squares diagonally.",this.specialMoves=[],this.notes="Is colour-bound.",this.categories=["Minor","Bishop","Colour-bound","Crusader"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.b)(t,e,X.Warbishop*n,[e=>X.getRank(e)<=6&&X.getFile(e)<=6?e+9:e,e=>X.getRank(e)<=6&&X.getFile(e)>=1?e+7:e,e=>X.getRank(e)>=1&&X.getFile(e)<=6?e-7:e,e=>X.getRank(e)>=1&&X.getFile(e)>=1?e-9:e,e=>X.getRank(e)<=5&&X.getFile(e)<=5?e+18:e,e=>X.getRank(e)<=5&&X.getFile(e)>=2?e+14:e,e=>X.getRank(e)>=2&&X.getFile(e)<=5?e-14:e,e=>X.getRank(e)>=2&&X.getFile(e)>=2?e-18:e,e=>X.getRank(e)>=2?e-16:e,e=>X.getRank(e)<=5?e+16:e,e=>X.getFile(e)>=2?e-2:e,e=>X.getFile(e)<=5?e+2:e],a)),i}}}T.shortName="WB",T.longName="Warbishop";class S extends s.a{constructor(){super(...arguments),this.materialValue=7,this.engineValue=700,this.valueGrid=o.e,this.evaluate=e=>this.engineValue,this.shortName=S.shortName,this.longName=S.longName,this.movesDescription="Moves any number of squares diagonally, or in an L-shape - combining the moves of the Knight and the Bishop.",this.specialMoves=[],this.notes="",this.categories=["Major","Queen","Crusader"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=[];return s.push(...(new i.a).getLegalMoves(e,t,a,n)),s.push(...(new c).getLegalMoves(e,t,a,n)),s}}}S.shortName="C",S.longName="Cardinal";class M extends s.a{constructor(){super(...arguments),this.materialValue=.5,this.engineValue=25,this.valueGrid=o.d,this.evaluate=e=>this.engineValue,this.shortName=M.shortName,this.longName=M.longName,this.movesDescription="Moves one square directly forward.",this.specialMoves=[],this.notes="Cannot capture or promote",this.categories=["Minor","Pawn","Token"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return"captures"!==a&&(1===X.getRank(e)||6===X.getRank(e)?i.push(...Object(r.a)(t,e,X.Pawn*n,[e=>n>0?e+8:e-8],"moves",2).map((e=>16===Math.abs(e.from-e.to)?{...e,special:"DOUBLE"}:e))):i.push(...Object(r.b)(t,e,X.Pawn*n,[e=>n>0?e+8:e-8],"moves"))),i}}}M.shortName="\xacP",M.longName="Dummy Pawn";var D=a.p+"static/media/bede_white.56fa5c65.svg",E=a.p+"static/media/bede_black.528c2b5e.svg",P=a.p+"static/media/waffle_white.ac9ddbc0.svg",R=a.p+"static/media/waffle_black.b8e5c779.svg",B=a.p+"static/media/warbishop_white.59df694b.svg",I=a.p+"static/media/warbishop_black.84a414c3.svg",L=a.p+"static/media/cardinal_white.abc22523.svg",F=a.p+"static/media/cardinal_black.b169cd4e.svg",A=a.p+"static/media/dummy_pawn_white.07ade20e.svg",H=a.p+"static/media/dummy_pawn_black.acf683a9.svg";class V extends s.a{constructor(){super(...arguments),this.materialValue=4,this.engineValue=400,this.valueGrid=o.f,this.evaluate=e=>this.engineValue,this.shortName=V.shortName,this.longName=V.longName,this.movesDescription="Leaps exactly 2 squares in any direction, or makes 1 move rookwise.",this.specialMoves=[],this.notes="",this.categories=["Minor","Unique","Omega"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.b)(t,e,X.Bede*n,[e=>X.getRank(e)>=2?e-16:e,e=>X.getRank(e)<=5?e+16:e,e=>X.getFile(e)>=2?e-2:e,e=>X.getFile(e)<=5?e+2:e,e=>X.getRank(e)<=5&&X.getFile(e)<=5?e+18:e,e=>X.getRank(e)<=5&&X.getFile(e)>=2?e+14:e,e=>X.getRank(e)>=2&&X.getFile(e)<=5?e-14:e,e=>X.getRank(e)>=2&&X.getFile(e)>=2?e-18:e,e=>X.getRank(e)>=1?e-8:e,e=>X.getRank(e)<=6?e+8:e,e=>X.getFile(e)>=1?e-1:e,e=>X.getFile(e)<=6?e+1:e],a)),i}}}V.shortName="CH",V.longName="Champion";class _ extends s.a{constructor(){super(...arguments),this.materialValue=4,this.engineValue=460,this.valueGrid=o.c,this.evaluate=e=>this.engineValue,this.shortName=_.shortName,this.longName=_.longName,this.movesDescription="Leaps in an elongated knight move, three squares in one direction then one square perpendicular. Can also move one square diagonally.",this.specialMoves=[],this.notes="",this.categories=["Minor","Unique","Omega"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[];return i.push(...Object(r.b)(t,e,X.Bede*n,[e=>X.getFile(e)>=3?e+5:e,e=>X.getFile(e)<=4?e-5:e,e=>X.getFile(e)<=4?e+11:e,e=>X.getFile(e)>=3?e-11:e,e=>X.getFile(e)>=1?e+23:e,e=>X.getFile(e)<=6?e-23:e,e=>X.getFile(e)<=6?e+25:e,e=>X.getFile(e)>=1?e-25:e,e=>X.getRank(e)<=6&&X.getFile(e)<=6?e+9:e,e=>X.getRank(e)<=6&&X.getFile(e)>=1?e+7:e,e=>X.getRank(e)>=1&&X.getFile(e)<=6?e-7:e,e=>X.getRank(e)>=1&&X.getFile(e)>=1?e-9:e],a)),i}}}_.shortName="WI",_.longName="Wizard";var q=a(5);class J extends s.a{constructor(){super(...arguments),this.materialValue=3,this.engineValue=350,this.valueGrid=o.a,this.evaluate=e=>this.engineValue,this.shortName=J.shortName,this.longName=J.longName,this.movesDescription="Moves as the piece your opponent last moved.",this.specialMoves=[],this.notes="Ignores card-based moves. Cannot move if your opponent hasn't moved a piece yet.",this.categories=["Minor","Unique","Omega"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0,s=[],r=[...i].reverse().filter((e=>Object(q.a)(e.moving,n))).filter((e=>!e.additional.hasOwnProperty("isCardMove")&&Math.abs(e.moving)!==X.Jester));if(r.length>=1){let o=r[0],c=X.getPiece(o.moving);c&&s.push(...c.getLegalMoves(e,t,a,n,i))}return s}}}J.shortName="J",J.longName="Jester";var W,U=a.p+"static/media/champion_white.a993ecde.svg",K=a.p+"static/media/champion_black.7801b11e.svg",G=a.p+"static/media/wizard_white.dd2b757b.svg",Y=a.p+"static/media/wizard_black.5c90220e.svg",z=a.p+"static/media/jester_white.5a769867.svg",Q=a.p+"static/media/jester_black.d3196538.svg";class X{}W=X,X.PIECES=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],X.PIECE_OBJECTS=[null,new n.a,new i.a,new c,new l,new d,new h,new w,new T,new C,new S,new M,new V,new _,new J],X.None=0,X.Pawn=1,X.Knight=2,X.Bishop=3,X.Rook=4,X.Queen=5,X.King=6,X.Waffle=7,X.Warbishop=8,X.Bede=9,X.Cardinal=10,X.DummyPawn=11,X.Champion=12,X.Wizard=13,X.Jester=14,X.isWhite=e=>e>0,X.isBlack=e=>e<0,X.getFile=e=>e%8,X.getRank=e=>(e-e%8)/8,X.getSquareName=e=>"".concat(u.a[W.getFile(e)]).concat(W.getRank(e)+1),X.getStyle=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{gridRow:t?"".concat(1+W.getRank(e),"/").concat(2+W.getRank(e)):"".concat(8-W.getRank(e),"/").concat(9-W.getRank(e)),gridColumn:t?"".concat(8-W.getFile(e),"/").concat(9-W.getFile(e)):"".concat(W.getFile(e)+1,"/").concat(W.getFile(e)+2)}},X.getImage=e=>{switch(Math.abs(e)){case 0:return"";case W.Pawn:return e>0?g:m;case W.Knight:return e>0?p:b;case W.Bishop:return e>0?f:j;case W.Rook:return e>0?v:O;case W.Queen:return e>0?x:N;case W.King:return e>0?y:k;case W.Waffle:return e>0?P:R;case W.Warbishop:return e>0?B:I;case W.Bede:return e>0?D:E;case W.Cardinal:return e>0?L:F;case W.DummyPawn:return e>0?A:H;case W.Champion:return e>0?U:K;case W.Wizard:return e>0?G:Y;case W.Jester:return e>0?z:Q}},X.getPiece=e=>W.PIECE_OBJECTS[Math.abs(e)]},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(72);class i{constructor(){this.cardName=void 0,this.shortName=void 0,this.description=void 0,this.id=void 0,this.expac=void 0,this.targets=void 0,this.fast=void 0,this.cost=void 0,this.unMoveType=void 0,this.getValidTargets=void 0,this.playCard=void 0,this.trackPiece=e=>e,this.uuid=Object(n.a)(),this.getUUID=()=>this.uuid,this.getUUIDWithInfo=()=>"".concat(this.id,"::").concat(this.uuid),this.regenerateUUID=()=>this.uuid=Object(n.a)()}}i.id=void 0},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n="FIDE",i="Crusaders"},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));const n=(e,t)=>e>0&&t<0||e<0&&t>0,i=(e,t)=>e>0&&t>0||e<0&&t<0},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));const n="myArmies",i="myDecks",s="myGames"},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a(1),i=a(5);const s=(e,t,a,n,i)=>r(e,t,a,n,i,1),r=function(e,t,a,s,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8,c=[];for(let l of s){let s=l(t),d=!1,h=0;for(;!d&&s<=63&&s>=0&&h<o;)e[s]===n.a.None?"captures"!==r&&c.push({from:t,to:s}):Object(i.a)(a,e[s])?("moves"!==r&&c.push({from:t,to:s}),d=!0):d=!0,d||(s===l(s)&&(d=!0),s=l(s),h++)}return c}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(){this.engineValue=void 0,this.materialValue=void 0,this.valueGrid=void 0,this.evaluate=void 0,this.shortName=void 0,this.longName=void 0,this.movesDescription=void 0,this.specialMoves=void 0,this.notes=void 0,this.categories=void 0,this.getLegalMoves=function(e,t,a){return t.map(((t,a)=>a!==e&&0===t?{from:e,to:a}:null)).filter((e=>null!==e))}}}},function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c}));const n=[0,0,0,0,0,0,0,0,50,50,50,50,50,50,50,50,10,10,20,30,30,20,10,10,5,5,10,25,25,10,5,5,0,0,0,20,20,0,0,0,5,-5,-10,0,0,-10,-5,5,5,10,10,-20,-20,10,10,5,0,0,0,0,0,0,0,0],i=[-50,-40,-30,-30,-30,-30,-40,-50,-40,-20,0,0,0,0,-20,-40,-30,0,10,15,15,10,0,-30,-30,5,15,20,20,15,5,-30,-30,0,15,20,20,15,0,-30,-30,5,10,15,15,10,5,-30,-40,-20,0,5,5,0,-20,-40,-50,-40,-30,-30,-30,-30,-40,-50],s=[-20,-10,-10,-10,-10,-10,-10,-20,-10,0,0,0,0,0,0,-10,-10,0,5,10,10,5,0,-10,-10,5,5,10,10,5,5,-10,-10,0,10,10,10,10,0,-10,-10,10,10,10,10,10,10,-10,-10,5,0,0,0,0,5,-10,-20,-10,-10,-10,-10,-10,-10,-20],r=[0,0,0,0,0,0,0,0,5,10,10,10,10,10,10,5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,-5,0,0,0,0,0,0,-5,0,0,5,5,5,5,0,0],o=[-20,-10,-10,-5,-5,-10,-10,-20,-10,0,0,0,0,0,0,-10,-10,0,5,5,5,5,0,-10,-5,0,5,5,5,5,0,-5,0,0,5,5,5,5,0,-5,-10,5,5,5,5,5,0,-10,-10,0,5,0,0,0,0,-10,-20,-10,-10,-5,-5,-10,-10,-20],c=[-30,-40,-40,-50,-50,-40,-40,-30,-30,-40,-40,-50,-50,-40,-40,-30,-30,-40,-40,-50,-50,-40,-40,-30,-30,-40,-40,-50,-50,-40,-40,-30,-20,-30,-30,-40,-40,-30,-30,-20,-10,-20,-20,-20,-20,-20,-20,-10,20,20,0,0,0,0,20,20,20,30,10,0,0,10,30,20]},function(e,t,a){"use strict";var n=a(39),i=a(40),s=a(41),r=a(30),o=a(42),c=a(47),l=a(48),d=a(49),h=a(50),u=a(51),g=a(43),m=a(44),p=a(52),b=a(34),f=a(53),j=a(54),v=a(55),O=a(45),x=a(46),N=a(35);const y={[i.a.id]:new i.a,[n.a.id]:new n.a,[s.a.id]:new s.a,[r.a.id]:new r.a,[o.a.id]:new o.a,[c.a.id]:new c.a,[u.a.id]:new u.a,[l.a.id]:new l.a,[d.a.id]:new d.a,[h.a.id]:new h.a,[g.a.id]:new g.a,[m.a.id]:new m.a,[O.a.id]:new O.a,[x.a.id]:new x.a,[N.a.id]:new N.a,[v.a.id]:new v.a,[p.a.id]:new p.a,[b.a.id]:new b.a,[f.a.id]:new f.a,[j.a.id]:new j.a};new N.a;t.a=y},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(2);var n=a(21),i=(a(92),a(0));function s(e){let{onClick:t,text:a,buttonStyle:s="small",disabled:r=!1,highlight:o=!1}=e;return c=Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"niceButtonBackground ".concat(s)}),Object(i.jsx)("div",{className:"niceButtonForeground ".concat(s," ").concat(r?"disabled":""," ").concat(o?"highlight":""),children:Object(i.jsx)("p",{children:a})})]}),"function"===typeof t?Object(i.jsx)("div",{className:"niceButtonOuter ".concat(s),onClick:()=>r?null:t(),children:c}):Object(i.jsx)(n.b,{to:t,children:Object(i.jsx)("div",{className:"niceButtonOuter ".concat(s),children:c})});var c}},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(32),i=a(1),s=a(57);class r{constructor(e,t,a,o){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.NONE,l=arguments.length>5?arguments[5]:void 0,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};this.from=void 0,this.to=void 0,this.moving=void 0,this.captured=void 0,this.specify=void 0,this.special=void 0,this.additional=void 0,this.getMoveName=()=>{var e,t;if(null===i.a.getPiece(this.moving))return this.additional.isCardMove&&"PROMOTION"===this.special&&this.additional.promotionTo?"".concat(n.a[i.a.getFile(this.to)]+i.a.getRank(this.to),"+").concat(null===(t=i.a.getPiece(this.additional.promotionTo))||void 0===t?void 0:t.shortName):"ERR";let a=i.a.getPiece(this.moving),o=a.shortName===s.a.shortName?"":a.shortName,c=this.captured===i.a.None?"":"x",l=i.a.getSquareName(this.to),d="";this.specify!==r.FILE&&this.specify!==r.BOTH||(d+=n.a[i.a.getFile(this.from)]),this.specify!==r.RANK&&this.specify!==r.BOTH||(d+=i.a.getRank(this.from));let h=this.additional&&this.additional.promotionTo?"=".concat(null===(e=i.a.getPiece(this.additional.promotionTo))||void 0===e?void 0:e.shortName):"";return"".concat(o).concat(d).concat(c).concat(l).concat(h)},this.from=e,this.to=t,this.moving=a,this.captured=o,this.specify=c,this.special=l,this.additional=d}}r.NONE=0,r.RANK=1,r.FILE=2,r.BOTH=3},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(29);var n=a(12);const i=e=>e.filter((e=>e instanceof n.a))},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1);const i=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],i=n.a.getRank(e),s=n.a.getFile(e);return i<=6&&(a.push(e+8),t&&(s>=1&&a.push(e+7),s<=6&&a.push(e+9))),i>=1&&(a.push(e-8),t&&(s>=1&&a.push(e-9),s<=6&&a.push(e-7))),s>=1&&a.push(e-1),s<=6&&a.push(e+1),a}},function(e,t,a){"use strict";a.d(t,"c",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return u}));var n=a(1),i=a(12),s=a(28),r=a(38),o=a(27),c=a(5),l=a(10),d=a(15);const h=(e,t,a,i)=>{let r=e.indexOf(n.a.King),o=e.indexOf(-n.a.King);if(-1===r||-1===o)return!1;let c=a>0?r:o;return i||(i=s.a.getLegalMoves(e,t,{mode:"captures",colour:-a})),i.filter((e=>e.to===c)).length>0},u=(e,t,a,n)=>{let i=new r.a(e.getBoard(),Object(d.a)(e.getMoves()),e.getWhiteDeck(),e.getBlackDeck());e.getCurrentOngoingEffects().forEach((e=>i.addOngoingEffect(new o.a(e.getSquare(),e.getName(),e.getDurationRemaining(),"",e.getTarget()))));let s=!1,c=l.a[t];if(a.length===c.targets)i.PlayCard(l.a[t],a),s=h(i.getBoard(),Object(d.a)(i.getMoves()),n),i.UnMove();else{s=!c.getValidTargets[0](i.getBoard(),n,Object(d.a)(i.getMoves()),a,i.getCurrentOngoingEffects()).reduce(((e,s)=>u(i,t,[...a,s],n)||e),!1)}return!s},g=(e,t,a,l,d)=>{let u=new r.a(t,a);return d.forEach((e=>u.addOngoingEffect(new o.a(e.getSquare(),e.getName(),e.getDurationRemaining(),e.getToolTip(),e.getTarget())))),e.filter((e=>{if(d.filter((e=>"no-captures"===e.getName())).filter((a=>a.getSquare()===e.from&&t[e.to]!==n.a.None)).length>0)return!1;if(d.filter((e=>"no-captures"===e.getName())).filter((a=>a.getSquare()===e.to&&t[e.to]!==n.a.None)).length>0)return!1;if(d.filter((e=>"no-moves"===e.getName())).filter((t=>t.getSquare()===e.from)).length>0)return!1;let r=d.filter((e=>"must-move"===e.getName())).filter((a=>a.getSquare()!==e.from&&Object(c.b)(l,t[a.getSquare()])));if(r.length>0){let e=t[r[0].getSquare()],s=n.a.getPiece(e);if(s){let e=s.getLegalMoves(r[0].getSquare(),t,"all",l,a).reduce(((e,t)=>{if(e)return!0;u.Move(t.from,t.to,t.special);let a=h(u.getBoard(),u.getMoves().filter((e=>e instanceof i.a)),l);return u.UnMove(),!a||e}),!1);if(e)return!1}}if("CASTLE"===e.special){if(h(u.getBoard(),a,l))return!1;let t=l>0?7:63,n=l>0?0:56;if(e.to===t-1&&s.a.isThreatened(t-2,u.getBoard(),a,-l))return!1;if(e.to===n+2&&s.a.isThreatened(n+3,u.getBoard(),a,-l))return!1}u.Move(e.from,e.to,e.special);let o=h(u.getBoard(),u.getMoves().filter((e=>e instanceof i.a)),l);return u.UnMove(),!o}))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));var n=a(1);class i{constructor(e,t){this.pieces=void 0,this.name=void 0,this.pieces=e,this.name=t}}const s=new i([n.a.Rook,n.a.Knight,n.a.Bishop,n.a.Queen,n.a.King,n.a.Bishop,n.a.Knight,n.a.Rook],"FIDE Army"),r=new i([n.a.Bede,n.a.Waffle,n.a.Warbishop,n.a.Cardinal,n.a.King,n.a.Warbishop,n.a.Waffle,n.a.Bede],"Colourbound Crusaders"),o=new i([n.a.Wizard,n.a.Jester,n.a.Champion,n.a.Queen,n.a.King,n.a.Champion,n.a.Jester,n.a.Wizard],"dev-army")},function(e,t,a){"use strict";a.d(t,"c",(function(){return y})),a.d(t,"d",(function(){return k})),a.d(t,"a",(function(){return w})),a.d(t,"b",(function(){return C}));var n=a(39),i=a(40),s=a(41),r=a(30),o=a(42),c=a(47),l=a(48),d=a(49),h=a(50),u=a(43),g=a(44),m=a(45),p=a(46),b=a(35),f=a(55),j=a(52),v=a(34),O=a(53),x=a(54),N=a(51);class y{constructor(e,t){this.cards=void 0,this.name=void 0,this.cards=e,this.name=t}}const k=new y([i.a.id,i.a.id,n.a.id,n.a.id,s.a.id,s.a.id,r.a.id,r.a.id,o.a.id,o.a.id,c.a.id,N.a.id,l.a.id,d.a.id,h.a.id],"FIDE Deck"),w=new y([u.a.id,u.a.id,g.a.id,g.a.id,m.a.id,m.a.id,p.a.id,p.a.id,b.a.id,b.a.id,f.a.id,j.a.id,v.a.id,O.a.id,x.a.id],"Colourbound Crusaders Deck"),C=new y([r.a.id,r.a.id,v.a.id,v.a.id],"FIDE Deck")},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(2),i=a(11),s=(a(100),a(26));a(101);const r=(e,t)=>btoa(encodeURIComponent(e)+"|"+encodeURIComponent(t)),o=e=>atob(e).split("|").map((e=>decodeURIComponent(e)));a(102);var c=a(0);function l(e){let{text:t}=e;return Object(c.jsxs)("div",{title:"Click to Copy",className:"textCopy",onClick:e=>(e=>{e.preventDefault(),e.stopPropagation(),navigator.clipboard?navigator.clipboard.writeText(t):alert(t)})(e),children:[Object(c.jsx)("div",{className:"scrollContainer",children:t}),Object(c.jsxs)("div",{className:"icon",children:[Object(c.jsx)("span",{className:"material-symbols-outlined",children:"content_copy"}),Object(c.jsx)("div",{className:"background"})]})]})}a(103);function d(e){let{text:t,onChange:a}=e;return Object(c.jsx)("div",{className:"textInput",children:Object(c.jsx)("div",{className:"scrollContainer",children:Object(c.jsx)("input",{type:"text",value:t,onChange:e=>a(e)})})})}var h=function(e){return e[e.none=0]="none",e[e.local=1]="local",e[e.remote=2]="remote",e}(h||{});function u(e){let{shown:t,popupRef:a}=e;const{Conn:u,Channel:g,setListener:m,initChannel:p}=Object(n.useContext)(s.b),[b,f]=Object(n.useState)(h.none),[j,v]=Object(n.useState)(),[O,x]=Object(n.useState)(""),N=e=>{x(e.target.value)},y=Object(n.useRef)([]);Object(n.useEffect)((()=>{u.addEventListener("icecandidate",(e=>{e.candidate&&(console.log("Found ICE candidate \n",e.candidate),y.current.push(e.candidate))})),u.addEventListener("icegatheringstatechange",(e=>{console.log("ice gathering state change: \n",u.iceGatheringState)})),u.addEventListener("connectionstatechange",(e=>{console.log("Connection state change: ",u.connectionState)})),window.DEV_SEND_MSG=e=>{g.send(e),console.log("sent message ",e)}}),[g,u]);const k=e=>console.log(e),w=e=>{f(e?h.local:h.remote),u.onicecandidate=e=>{if(e.candidate)console.log(e.candidate.candidate);else{var t;console.log("iceGatheringState complete\n",null===(t=u.localDescription)||void 0===t?void 0:t.sdp);let e=JSON.stringify(u.localDescription),a=JSON.stringify(y.current);console.log("Candidates: \n",a),v(r(e,a))}},e&&(p(),u.createOffer().then((e=>{console.log("createOffer ok"),u.setLocalDescription(e).then((()=>{}))}))),u.ondatachannel=e=>{console.group("Received Channel: ".concat(e.channel.id)),console.log("Currently channel ".concat(null===g||void 0===g?void 0:g.id,": \n"),g),p(e.channel),console.groupEnd()}},C=()=>{let[e,t]=o(O),a=JSON.parse(e),n=new RTCSessionDescription(a),i=JSON.parse(t);console.log("Received offer from remote: \n",n),console.log("Received ice candidates: \n",t),u.setRemoteDescription(n).then((()=>{console.log("Set the remote description"),"offer"===n.type&&u.createAnswer().then((e=>{console.log("createAnswer ok \n",e),u.setLocalDescription(e).then((()=>{}))})).catch(k)})).catch(k),console.log(i);try{i.forEach((e=>{u.addIceCandidate(e).then((()=>{console.log("Adding ice candidate: \n",e)}))}))}catch(s){console.log("Failed to assign ice candidates \n",s)}};return Object(c.jsxs)("div",{className:t?"shown":"hidden",id:"ConnectingPopup",children:[Object(c.jsx)("div",{id:"PopupBackground"}),Object(c.jsxs)("div",{id:"ConnectionPopupBubble",ref:a,children:[Object(c.jsx)("h1",{children:u.connectionState}),Object(c.jsxs)("div",{className:"section",children:[Object(c.jsx)("p",{children:"In order to play online, you have to connect directly to another server. This can be done by creating an offer."}),Object(c.jsx)("p",{children:"Either player can create the first offer."}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(i.a,{disabled:b!==h.none,highlight:b===h.local,onClick:()=>w(!0),text:"Create an Offer"}),Object(c.jsx)(i.a,{disabled:b!==h.none,highlight:b===h.remote,onClick:()=>w(!1),text:"Recieve an Offer"})]})]}),b!==h.local?null:Object(c.jsxs)("div",{className:"section",children:[Object(c.jsx)("label",{children:"Your Offer"}),Object(c.jsx)(l,{text:j||"ERROR - view browser console"}),Object(c.jsx)("p",{children:"Copy this string, and send it to your opponent. Ask them to send theirs back, and enter it into the field below!"}),Object(c.jsx)("label",{children:"Remote Offer"}),Object(c.jsx)(d,{text:O,onChange:e=>N(e)}),Object(c.jsx)(i.a,{disabled:""===O,onClick:()=>C(),text:"Connect!"})]}),b!==h.remote?null:Object(c.jsxs)("div",{className:"section",children:[Object(c.jsx)("label",{children:"Remote Offer"}),Object(c.jsx)(d,{text:O,onChange:e=>N(e)}),Object(c.jsx)("p",{children:"Enter the description you've been given, then send your opponent yours!"}),Object(c.jsx)("label",{children:"Your Offer"}),Object(c.jsx)(l,{text:j||"ERROR - view browser console"}),Object(c.jsx)(i.a,{disabled:""===O,onClick:()=>C(),text:"Generate Answer"})]})]})]})}function g(e){let{fixed:t=!0}=e;const{Conn:a}=Object(n.useContext)(s.b),r=Object(n.useRef)(null),[o,l]=Object(n.useState)(!1);return Object(c.jsxs)(c.Fragment,{children:[" ",Object(c.jsxs)("div",{id:"NavBar",style:t?{}:{position:"absolute"},children:[Object(c.jsx)("h3",{className:"navBarHeader",children:"Epic Fantasy Chess"}),Object(c.jsx)(i.a,{onClick:"/",text:"HOME",buttonStyle:"small"}),Object(c.jsx)(i.a,{onClick:"/play",text:"PLAY",buttonStyle:"small"}),Object(c.jsx)(i.a,{onClick:"/armies",text:"ARMIES",buttonStyle:"small"}),Object(c.jsx)(i.a,{onClick:"/decks",text:"DECKS",buttonStyle:"small"}),Object(c.jsx)("div",{id:"ConnectionManager",onClick:e=>(e=>{e.preventDefault(),e.stopPropagation(),l(!0),window.addEventListener("click",(function e(t){if(r.current){var a;let{x:n,y:i,height:s,width:o}=null===(a=r.current)||void 0===a?void 0:a.getBoundingClientRect();if(n<t.x&&t.x<n+o&&i<t.y&&t.y<i+s)return;l(!1),window.removeEventListener("click",e)}}))})(e),children:(()=>{switch(a.connectionState){case"new":case"closed":return"not connected";default:return a.connectionState}})()})]}),Object(c.jsx)(u,{shown:o,popupRef:r})]})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>e[Math.floor(Math.random()*e.length)]},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(2),i=a.n(n);const s={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},r=new RTCPeerConnection(s);let o=r.createDataChannel("dataChannel");o.onopen=()=>{console.log("data channel opened!")},o.onclose=()=>{console.log("data channel closed!")};const c=i.a.createContext({Conn:r,Channel:o,initChannel:()=>{},setListener:e=>{o?o.onmessage=e:console.log("Tried to attach listener but no data channel exists.")}});t.b=c},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(e,t,a,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"piece";this.affecting=void 0,this.name=void 0,this.initialDuration=void 0,this.durationRemaining=void 0,this.toolTip=void 0,this.target=void 0,this.getSquare=()=>this.affecting,this.getName=()=>this.name,this.getInitialDuration=()=>this.initialDuration,this.getDurationRemaining=()=>this.durationRemaining,this.getToolTip=()=>this.toolTip,this.getTarget=()=>this.target,this.updateSquare=e=>this.affecting=e,this.tickDownDuration=()=>this.durationRemaining--,this.unTickDuration=()=>this.durationRemaining++,this.affecting=e,this.name=t,this.initialDuration=a,this.durationRemaining=a,this.toolTip=n,this.target=i}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n,i=a(1);class s{}n=s,s.getLegalMoves=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({mode:"all",colour:0,ignore:[]},a),s=[];return e.map(((e,t)=>[e,t])).filter((e=>e[0]>0&&n.colour>0||e[0]<0&&n.colour<0)).filter((e=>{let[t,a]=e;return-1===n.ignore.indexOf(a)})).forEach((a=>{let[r,o]=a;if(r===i.a.None)return;let c=i.a.getPiece(r);if(null===c)return;let l=c.getLegalMoves(o,e,n.mode,n.colour,t);s.push(...l)})),s},s.isThreatened=(e,t,a,i)=>n.getThreats(e,t,a,i).length>0,s.getThreats=function(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-t[e];return n.getLegalMoves(t,a,{mode:"all",colour:i}).filter((t=>t.to===e))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(10);class i{constructor(e,t,a){this.cardName=void 0,this.boardBefore=void 0,this.targets=void 0,this.getMoveName=()=>n.a[this.cardName].shortName,this.cardName=e,this.boardBefore=t,this.targets=a,-1===Object.keys(n.a).indexOf(e)&&console.log("Warning - creating a CardMove using a non-existant card!")}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(16),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Reposition",this.description="Swap 2 adjacent friendly pieces",this.targets=2,this.fast=!1,this.cost=8,this.shortName="_Rpos",this.id=c.id,this.expac=o.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];return n&&0!==n.length?e.forEach(((e,a)=>{e!==i.a.None&&Object(s.b)(e,t)&&-1!==Object(r.a)(n?n[0]:a).indexOf(a)&&o.push(a)})):e.forEach(((a,n)=>{a!==i.a.None&&Object(s.b)(a,t)&&Object(r.a)(n).filter((t=>Object(s.b)(a,e[t]))).length>0&&o.push(n)})),o.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{let[a,n]=e;t.updateGameBoard((e=>{let t=e[a],i=e[n];e[a]=i,e[n]=t}))},this.trackPiece=(e,t)=>{if(t.length===this.targets){let[a,n]=t;if(e===a)return n;if(e===n)return a}return e}}}c.id="reposition"},function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return l}));class n{constructor(){this.msgType=void 0,this.payload=void 0}}class i extends n{constructor(){super(...arguments),this.msgType="ready",this.payload={}}}class s extends n{constructor(e){super(),this.msgType="setup_choice",this.payload=void 0,this.payload=e}}class r extends n{constructor(e){super(),this.msgType="game_start_request",this.payload=void 0,this.payload=e}}class o extends n{constructor(e){super(),this.msgType="game_start_response",this.payload=void 0,this.payload=e}}class c extends n{constructor(e){super(),this.msgType="piece_move",this.payload=void 0,this.payload=e}}class l extends n{constructor(e){super(),this.msgType="card_move",this.payload=void 0,this.payload=e}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=["a","b","c","d","e","f","g","h"]},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r}));var n=a(1);const i=()=>{let e=[];for(let t=0;t<=63;t++)e.push(0);return e},s=()=>{let e=i();for(let t=8;t<=15;t++)e[t]=n.a.Pawn,e[63-t]=-n.a.Pawn;return e[0]=n.a.Rook,e[7]=n.a.Rook,e[56]=-n.a.Rook,e[63]=-n.a.Rook,e[1]=n.a.Knight,e[6]=n.a.Knight,e[57]=-n.a.Knight,e[62]=-n.a.Knight,e[2]=n.a.Bishop,e[5]=n.a.Bishop,e[58]=-n.a.Bishop,e[61]=-n.a.Bishop,e[3]=n.a.Queen,e[59]=-n.a.Queen,e[4]=n.a.King,e[60]=-n.a.King,e},r=(e,t)=>{let a=i();e.pieces.map(((e,t)=>a[t]=e)),t.pieces.map(((e,t)=>a[56+t]=-1*e));for(let i=8;i<=15;i++)a[i]=n.a.Pawn,a[63-i]=-n.a.Pawn;return a}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(3),i=a(1),s=a(5),r=a(4);class o extends n.a{constructor(){super(...arguments),this.cardName="Deception",this.description="Swap any 2 friendly pieces",this.targets=2,this.fast=!1,this.cost=12,this.shortName="_Dcep",this.id=o.id,this.expac=r.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let r=[];return e.forEach(((e,a)=>{e!==i.a.None&&Object(s.b)(e,t)&&r.push(a)})),r.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{let[a,n]=e;t.updateGameBoard((e=>{let t=e[a],i=e[n];e[a]=i,e[n]=t}))},this.trackPiece=(e,t)=>{if(t.length===this.targets){let[a,n]=t;if(e===a)return n;if(e===n)return a}return e}}}o.id="deception"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(27),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Oust",this.description="Choose a non-king enemy piece. Your opponent must move it next turn (if possible).",this.targets=1,this.fast=!0,this.cost=3,this.shortName="_Oust",this.id=c.id,this.expac=o.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let r=[];return e.forEach(((e,a)=>{e===i.a.None||e===-t*i.a.King||Object(s.b)(e,t)||r.push(a)})),r.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.addOngoingEffect(new r.a(e,"must-move",1,"This piece is being ousted. It must be moved on its next turn (if possible)."))}))}}}c.id="oust"},,function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(8),i=a(7),s=a(1),r=a(9);class o extends n.a{constructor(){super(...arguments),this.materialValue=3,this.engineValue=320,this.valueGrid=r.c,this.evaluate=e=>this.engineValue,this.shortName=o.shortName,this.longName=o.longName,this.movesDescription="Two squares in one direction, then one perpendicular, forming an L-shape.",this.specialMoves=[],this.notes="Can leap over pieces.",this.categories=["Minor","Knight","FIDE"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=[];return r.push(...Object(i.b)(t,e,s.a.Knight*n,[e=>s.a.getFile(e)>=2?e+6:e,e=>s.a.getFile(e)>=2?e-10:e,e=>s.a.getFile(e)<=5?e+10:e,e=>s.a.getFile(e)<=5?e-6:e,e=>s.a.getFile(e)>=1?e+15:e,e=>s.a.getFile(e)<=6?e-15:e,e=>s.a.getFile(e)<=6?e+17:e,e=>s.a.getFile(e)>=1?e-17:e],a)),r}}}o.shortName="N",o.longName="Knight"},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return u}));var n=a(33),i=a(12),s=a(29),r=a(1),o=a(10),c=a(19),l=a(24),d=a(15),h=a(65);class u{constructor(){var t=this;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(n.c)(),u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.d,m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.d;this.board=void 0,this.currentTurn=void 0,this.moves=void 0,this.gameLength=void 0,this.whiteHand=void 0,this.blackHand=void 0,this.whiteDeck=void 0,this.blackDeck=void 0,this.whiteCurrentDeck=void 0,this.blackCurrentDeck=void 0,this.ongoingEffects=void 0,this.UnMove=()=>{let e=this.moves.pop();if(e instanceof i.a){if(this.moves=[...this.moves],void 0===e)return;let t=e.moving>0?1:-1;switch("EP"!==e.special&&(this.board[e.to]=e.captured),this.board[e.from]=e.moving,this.getCurrentOngoingEffects().filter((t=>t.getSquare()===e.to&&"piece"===t.getTarget())).forEach((t=>t.updateSquare(e.from))),e.special){case"EP":this.board[e.to]=r.a.None,this.board[e.to-8*t]=e.captured;break;case"PROMOTION":break;case"CASTLE":if(e.from>e.to){let t=0;Math.abs(this.board[e.to+1])===r.a.Rook?t=2:Math.abs(this.board[e.to+1])===r.a.Bede&&(t=1);let a=e.to-t;this.board[a]=this.board[e.to+1],this.board[e.to+1]=r.a.None}if(e.from<e.to){let t=e.to+1;this.board[t]=this.board[e.to-1],this.board[e.to-1]=r.a.None}}e.additional.isCardMove?this.UnMove():this.undoEndOfTurnCheck()}if(e instanceof s.a){this.board.forEach(((t,a)=>{t!==e.boardBefore[a]&&(this.board[a]=e.boardBefore[a])}));let t=Object.assign({},o.a[e.cardName]);t.regenerateUUID(),this.currentTurn<0?this.whiteHand.push(t):this.blackHand.push(t);let a=o.a[e.cardName],n=[];this.ongoingEffects.forEach(((e,t)=>{e.getDurationRemaining()===e.getInitialDuration()&&n.push(t)})),this.ongoingEffects=this.ongoingEffects.filter(((e,t)=>-1===n.indexOf(t))),a&&!a.fast&&this.undoEndOfTurnCheck()}},this.Move=function(e,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.board[e]>0?1:-1,c=i.a.NONE,l=t.board[e],d=a===e?r.a.None:t.board[a];switch(Math.abs(t.board[e])===r.a.Pawn&&0!==t.board[a]&&(c=i.a.FILE),n){case"EP":d=t.board[a-8*o],t.board[a-8*o]=r.a.None;break;case"PROMOTION":if(s.hasOwnProperty("promotionTo")&&void 0!==s.promotionTo){let{promotionTo:a}=s;t.board[e]=a}break;case"CASTLE":if(e>a){let e=a;Math.abs(t.board[a-2])===r.a.Rook&&t.board[a-1]===r.a.None?e-=2:Math.abs(t.board[a-1])===r.a.Bede&&(e-=1),t.board[a+1]=t.board[e],t.board[e]=r.a.None}if(e<a){let e=a+1;t.board[a-1]=t.board[e],t.board[e]=r.a.None}}t.moves.push(new i.a(e,a,l,d,c,n,s)),t.board[a]=t.board[e],a!==e&&(t.board[e]=r.a.None),t.getCurrentOngoingEffects().filter((t=>t.getSquare()===e&&"piece"===t.getTarget())).forEach((e=>{e.updateSquare(a)})),s.isCardMove||t.endOfTurnCheck()},this.endOfTurnCheck=()=>{this.currentTurn<0&&this.gameLength++,this.currentTurn=-this.currentTurn,this.checkForCardDraw(),this.ongoingEffects.forEach((e=>e.tickDownDuration()))},this.undoEndOfTurnCheck=()=>{this.currentTurn>0&&this.gameLength--,this.currentTurn=-this.currentTurn,this.checkForUndoCardDraw(),this.ongoingEffects.forEach(((e,t)=>{e.unTickDuration()}))},this.checkForCardDraw=()=>{this.gameLength%3===0&&this.currentTurn>0&&(this.whiteCurrentDeck.length>0&&this.DrawCard(1),this.blackCurrentDeck.length>0&&this.DrawCard(-1))},this.checkForUndoCardDraw=()=>{if((this.gameLength+1)%3===0&&this.currentTurn<0&&this.whiteHand.length>0&&this.blackHand.length>0){let e=this.whiteHand.pop(),t=this.blackHand.pop();this.whiteCurrentDeck.push(e),this.blackCurrentDeck.push(t)}},this.PlayCard=(e,t)=>{if(!e)return void console.log("Tried to play a card that does not exist!");if(t.length!==e.targets)return void console.log("Tried to play a card with the improper amount of targets");let a=[...this.board],n=new s.a(e.id,a,t);if(this.moves.push(n),e.playCard(t,this),this.currentTurn>0){let t=this.whiteHand.map((e=>e.getUUID())).indexOf(e.getUUID());this.whiteHand=this.whiteHand.filter(((e,a)=>a!==t))}else{let t=this.blackHand.map((e=>e.getUUID())).indexOf(e.getUUID());this.blackHand=this.blackHand.filter(((e,a)=>a!==t))}e.fast||this.endOfTurnCheck()},this.DrawCard=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.whiteCurrentDeck.length:t.blackCurrentDeck.length,i=Object(h.min)([n,a]);if(e>0)for(let s=0;s<i;s++){let e=Number.parseInt(Object(l.a)(Object.keys(t.whiteCurrentDeck)));t.whiteHand.push(t.whiteCurrentDeck[e]),t.whiteCurrentDeck=t.whiteCurrentDeck.filter(((t,a)=>a!==e))}else for(let s=0;s<i;s++){let e=Number.parseInt(Object(l.a)(Object.keys(t.blackCurrentDeck)));t.blackHand.push(t.blackCurrentDeck[e]),t.blackCurrentDeck=t.blackCurrentDeck.filter(((t,a)=>a!==e))}},this.getBoard=()=>this.board,this.getMoves=()=>this.moves,this.getCurrentTurn=()=>this.currentTurn,this.getWhiteHand=()=>this.whiteHand,this.getBlackHand=()=>this.blackHand,this.getCurrentPlayerHand=()=>this.currentTurn>0?this.whiteHand:this.blackHand,this.getChaosScore=()=>Object(d.a)(this.moves).reduce(((e,t)=>r.a.getPiece(t.captured)?e+r.a.getPiece(t.captured).materialValue:e),0),this.getWhiteCurrentDeck=()=>this.whiteCurrentDeck,this.getBlackCurrentDeck=()=>this.blackCurrentDeck,this.getWhiteDeck=()=>this.whiteDeck,this.getBlackDeck=()=>this.blackDeck,this.getCurrentPlayerCurrentDeck=()=>this.currentTurn>0?this.whiteCurrentDeck:this.blackCurrentDeck,this.getNonCurrentPlayerCurrentDeck=()=>this.currentTurn>0?this.blackCurrentDeck:this.whiteCurrentDeck,this.getOngoingEffects=()=>this.ongoingEffects,this.getCurrentOngoingEffects=()=>this.ongoingEffects.filter((e=>e.getDurationRemaining()>=0)),this.addOngoingEffect=e=>this.ongoingEffects.push(e),this.getLastMove=()=>this.moves.length>0?this.moves[this.moves.length-1]:void 0,this.dangerouslySetCurrentTurn=e=>this.currentTurn=e,this.setWhiteHand=e=>this.whiteHand=e(this.whiteHand),this.setBlackHand=e=>this.blackHand=e(this.blackHand),this.updateGameBoard=e=>e(this.board),this.board=[...a],this.moves=u,this.currentTurn=1,this.gameLength=1,this.whiteHand=[],this.blackHand=[],this.whiteDeck=g,this.blackDeck=m,this.whiteCurrentDeck=this.whiteDeck.cards.map((e=>{let t=Object.assign({},o.a[e]);return t.regenerateUUID(),t})),this.blackCurrentDeck=this.blackDeck.cards.map((e=>{let t=Object.assign({},o.a[e]);return t.regenerateUUID(),t})),this.DrawCard(1,2),this.DrawCard(-1,3),this.whiteHand=this.whiteHand.map((e=>{let t=Object.assign({},e);return t.regenerateUUID(),t})),this.blackHand=this.blackHand.map((e=>{let t=Object.assign({},e);return t.regenerateUUID(),t})),this.ongoingEffects=[],e.window&&(e.window.updateBoard=e=>e(this.board).map(((e,t)=>this.board[t]=e)),e.window.ADD_CARD_TO_HAND=e=>{o.a[e]&&(this.currentTurn>0?this.whiteHand.push(o.a[e]):this.blackHand.push(o.a[e]))})}}}).call(this,a(60))},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(16),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Expendable",this.description="Summon a pawn adjacent to a friendly piece.",this.targets=1,this.fast=!1,this.cost=4,this.shortName="_Expd",this.id=c.id,this.expac=o.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];return e.forEach(((a,n)=>{a===i.a.None&&Object(r.a)(n).filter((a=>Object(s.b)(t,e[a]))).length>0&&o.push(n)})),o.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.Move(e,e,"PROMOTION",{isCardMove:!0,promotionTo:i.a.Pawn*t.getCurrentTurn()})}))}}}c.id="expendable"},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(3),i=a(1),s=a(4);class r extends n.a{constructor(){super(...arguments),this.cardName="Advance",this.description="Move 2 pawns forward one.",this.targets=2,this.fast=!1,this.cost=0,this.shortName="_Advn",this.id=r.id,this.expac=s.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let s=[];return e.forEach(((a,n)=>{a===i.a.Pawn*t&&i.a.getRank(n)!==(t>0?7:0)&&e[n+8*t]===i.a.None&&s.push(n)})),s.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.Move(e,e+8*t.getCurrentTurn(),void 0,{isCardMove:!0})}))}}}r.id="advance"},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(3),i=a(1),s=a(5),r=a(4);class o extends n.a{constructor(){super(...arguments),this.cardName="Tactical Retreat",this.description="Move a piece back 2 squares.",this.targets=1,this.fast=!0,this.cost=5,this.shortName="_Tcrt ",this.id=o.id,this.expac=r.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let r=[];return e.forEach(((a,n)=>{Object(s.b)(a,t)&&(t>0&&i.a.getRank(n)>=2||t<0&&i.a.getRank(n)<=5)&&e[n-8*t]===i.a.None&&e[n-16*t]===i.a.None&&r.push(n)})),r.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.Move(e,e-16*t.getCurrentTurn(),void 0,{isCardMove:!0})}))}}}o.id="tactical-retreat"},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(3),i=a(1),s=a(4);class r extends n.a{constructor(){super(...arguments),this.cardName="Mount",this.description="A friendly pawn promotes into a knight.",this.targets=1,this.fast=!1,this.cost=10,this.shortName="_Moun",this.id=r.id,this.expac=s.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let s=[];return e.forEach(((e,a)=>{e===i.a.Pawn*t&&s.push(a)})),s.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.Move(e,e,"PROMOTION",{isCardMove:!0,promotionTo:i.a.Knight*t.getCurrentTurn()})}))}}}r.id="mount"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(16),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Adjust",this.description="A piece makes one move rookwise",this.targets=2,this.fast=!1,this.cost=0,this.shortName="_Adjs",this.id=c.id,this.expac=o.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];if(n&&n[0]){let t=n[0];Object(r.a)(t,!1).forEach((t=>{e[t]===i.a.None&&o.push(t)}))}else e.forEach(((a,n)=>{Object(s.b)(a,t)&&Object(r.a)(n,!1).filter((t=>e[t]===i.a.None)).length>0&&o.push(n)}));return o}],this.playCard=(e,t)=>{let[a,n]=e;t.Move(a,n,void 0,{isCardMove:!0})}}}c.id="adjust"},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(3),i=a(1),s=a(4);class r extends n.a{constructor(){super(...arguments),this.cardName="Inquisition",this.description="A pawn moves forward 2",this.targets=1,this.fast=!1,this.cost=0,this.shortName="_Inqu",this.id=r.id,this.expac=s.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let s=[];return e.forEach(((a,n)=>{a===i.a.Pawn*t&&e[n+16*t]===i.a.None&&s.push(n)})),s}],this.playCard=(e,t)=>{let[a]=e,n=t.getCurrentTurn();t.Move(a,a+16*n,"DOUBLE",{isCardMove:!0})}}}r.id="inquisition"},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(3),i=a(1),s=a(27),r=a(4);class o extends n.a{constructor(){super(...arguments),this.cardName="Hallow",this.description="A non-king piece cannot capture or be captured for 1 turn.",this.targets=1,this.fast=!0,this.cost=2,this.shortName="_Hlow",this.id=o.id,this.expac=r.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let s=[];return e.forEach(((e,t)=>{e!==i.a.None&&Math.abs(e)!==i.a.King&&s.push(t)})),s.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.addOngoingEffect(new s.a(e,"no-captures",1,"This piece has been hallowed, and cannot capture or be captured."))}))}}}o.id="hallow"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(27),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Repent",this.description="Choose a non-king enemy piece. Your opponent cannot move it next turn.",this.targets=1,this.fast=!0,this.cost=2,this.shortName="_Rpnt",this.id=c.id,this.expac=o.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let r=[];return e.forEach(((e,a)=>{e===i.a.None||e===-t*i.a.King||Object(s.b)(e,t)||r.push(a)})),r.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.addOngoingEffect(new r.a(e,"no-moves",1,"This piece is repenting. It cannot be moved normally (Can still be moved by cards)."))}))}}}c.id="repent"},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(3),i=a(1),s=a(5),r=a(4);class o extends n.a{constructor(){super(...arguments),this.cardName="Demote",this.description="An opposing minor piece demotes to a pawn.",this.targets=1,this.fast=!1,this.cost=12,this.shortName="_Dmot",this.id=o.id,this.expac=r.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let r=[];return e.forEach(((e,a)=>{var n,o;-1!==(null===(n=i.a.getPiece(e))||void 0===n?void 0:n.categories.indexOf("Minor"))&&-1===(null===(o=i.a.getPiece(e))||void 0===o?void 0:o.categories.indexOf("Pawn"))&&Object(s.a)(t,e)&&r.push(a)})),r.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.Move(e,e,"PROMOTION",{isCardMove:!0,promotionTo:-i.a.Pawn*t.getCurrentTurn()})}))}}}o.id="demote"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(37),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Maneuver",this.description="A bishop makes a knight move.",this.targets=2,this.fast=!1,this.cost=15,this.shortName="_Mnvr",this.id=c.id,this.expac=o.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];if(n&&0!==n.length){let a=(new r.a).getLegalMoves(n[0],e,"moves",t);e.forEach(((e,t)=>{a.filter((e=>e.to===t)).length>0&&o.push(t)}))}else e.forEach(((e,a)=>{var n;Object(s.b)(e,t)&&-1!==(null===(n=i.a.getPiece(e))||void 0===n?void 0:n.categories.indexOf("Bishop"))&&o.push(a)}));return o.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{let[a,n]=e;t.Move(a,n,void 0,{isCardMove:!0})}}}c.id="maneuver"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(16),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Flee",this.description="Your king moves to a square adjacent to a friendly piece.",this.targets=2,this.fast=!1,this.cost=25,this.shortName="_Flee",this.id=c.id,this.expac=o.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];return n&&0!==n.length?e.forEach(((a,n)=>{a===i.a.None&&Object(r.a)(n).filter((a=>Object(s.b)(t,e[a])&&Math.abs(e[a])!==i.a.King)).length>0&&o.push(n)})):e.forEach(((e,a)=>{var n;Object(s.b)(e,t)&&-1!==(null===(n=i.a.getPiece(e))||void 0===n?void 0:n.categories.indexOf("King"))&&o.push(a)})),o.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{let[a,n]=e;t.Move(a,n,void 0,{isCardMove:!0})}}}c.id="flee"},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(3),i=a(1),s=a(7),r=a(4);class o extends n.a{constructor(){super(...arguments),this.cardName="Promotion",this.description="A friendly pawn advances as far up its file as possible. If it reaches the back rank, it becomes a Rook.",this.targets=1,this.fast=!1,this.cost=30,this.shortName="_Prmo",this.id=o.id,this.expac=r.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let s=[];return e.forEach(((a,n)=>{a===i.a.Pawn*t&&e[n+8*t]===i.a.None&&s.push(n)})),s.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{const a=Object(s.a)(t.getBoard(),e,t.getBoard()[e],[e=>e+8*t.getCurrentTurn()],"moves");if(a.length>=1){let n=a[a.length-1];7===i.a.getRank(n.to)&&t.getCurrentTurn()>0||0===i.a.getRank(n.to)&&t.getCurrentTurn()<0?t.Move(e,n.to,"PROMOTION",{isCardMove:!0,promotionTo:i.a.Rook*t.getCurrentTurn()}):t.Move(e,n.to,void 0,{isCardMove:!0})}else console.log("RIDER RETURNED 0 RIDER MOVES")}))}}}o.id="promotion"},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(3),i=a(4);class s extends n.a{constructor(){super(...arguments),this.cardName="Battle Plan",this.description="Draw 3 cards",this.targets=1,this.fast=!1,this.cost=12,this.shortName="_BPln",this.id=s.id,this.expac=i.b,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let i=[];return e.forEach(((e,t)=>i.push(t))),i}],this.playCard=(e,t)=>{let a=t.getCurrentTurn();t.DrawCard(a,3)}}}s.id="battleplan"},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(3),i=a(1),s=a(4);class r extends n.a{constructor(){super(...arguments),this.cardName="Anoint",this.description="A friendly pawn promotes into a bishop.",this.targets=1,this.fast=!1,this.cost=11,this.shortName="_Anoi",this.id=r.id,this.expac=s.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let s=[];return e.forEach(((e,a)=>{e===i.a.Pawn*t&&s.push(a)})),s.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{e.forEach((e=>{t.Move(e,e,"PROMOTION",{isCardMove:!0,promotionTo:i.a.Bishop*t.getCurrentTurn()})}))}}}r.id="anonit"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(16),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Clergy",this.description="Summon 2 pawns next to each other",this.targets=2,this.fast=!1,this.cost=15,this.shortName="_Clrg",this.id=c.id,this.expac=o.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];return n&&0!==n.length?e.forEach(((e,t)=>{e===i.a.None&&-1!==Object(r.a)(n?n[0]:t).indexOf(t)&&o.push(t)})):e.forEach(((a,n)=>{a===i.a.None&&Object(r.a)(n).filter((a=>Object(s.b)(t,e[a]))).length>0&&o.push(n)})),o.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{t.updateGameBoard((a=>{e.forEach((e=>{t.Move(e,e,"PROMOTION",{isCardMove:!0,promotionTo:i.a.Pawn*t.getCurrentTurn()})}))}))}}}c.id="clergy"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(17),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Convert",this.description="Choose an enemy piece you can capture. You take control of it instead.",this.targets=1,this.fast=!1,this.cost=18,this.shortName="_Convt",this.id=c.id,this.expac=o.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n,o)=>{let c=[];return e.forEach(((n,l)=>{Object(s.b)(n,t)&&i.a.getPiece(n)&&Object(r.b)(i.a.getPiece(n).getLegalMoves(l,e,"captures",t,a),e,a,t,o||[]).forEach((e=>{c.push(e.to)}))})),c.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{t.updateGameBoard((t=>{e.forEach((e=>{t[e]=-t[e]}))}))}}}c.id="convert"},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(3),i=a(1),s=a(5),r=a(16),o=a(4);class c extends n.a{constructor(){super(...arguments),this.cardName="Envoy",this.description="Summon a dummy pawn that cannot capture or promote adjacent to a friendly piece",this.targets=1,this.fast=!0,this.cost=5,this.shortName="_Envy",this.id=c.id,this.expac=o.a,this.unMoveType="boardState",this.getValidTargets=[(e,t,a,n)=>{let o=[];return e.forEach(((a,n)=>{a===i.a.None&&Object(r.a)(n).filter((a=>Object(s.b)(t,e[a]))).length>0&&o.push(n)})),o.filter((e=>!n||0===n.length||-1===n.indexOf(e)))}],this.playCard=(e,t)=>{t.updateGameBoard((a=>{e.forEach((e=>{a[e]=i.a.DummyPawn*(t.getCurrentTurn()>0?1:-1)}))}))}}}c.id="envoy"},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(29),i=a(12);const s=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];let s=t[0];for(let r of t)if(r instanceof i.a&&s instanceof i.a){if(r.to!==s.to||r.from!==s.from||r.moving!==s.moving||r.captured!==s.captured||r.special!==s.special)return!1}else if(r instanceof n.a&&s instanceof n.a)return!1;return!0}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(8),i=a(7),s=a(1),r=a(9);class o extends n.a{constructor(){super(...arguments),this.materialValue=1,this.engineValue=100,this.valueGrid=r.d,this.evaluate=e=>this.engineValue,this.shortName=o.shortName,this.longName=o.longName,this.movesDescription="Moves one square directly forward, and captures one square diagonally forward.",this.specialMoves=["Can move two squares at once if on your second rank.",'If an opposing pawn moves two squares at once, can capture that pawn by "capturing" the square it skipped over.'],this.notes="Upon reaching the final rank, pawns can promote into another piece in the game.",this.categories=["Minor","Pawn"],this.getLegalMoves=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0,o=[];if("captures"!==a&&(1===s.a.getRank(e)||6===s.a.getRank(e)?o.push(...Object(i.a)(t,e,s.a.Pawn*n,[e=>n>0?e+8:e-8],"moves",2).map((e=>16===Math.abs(e.from-e.to)?{...e,special:"DOUBLE"}:e))):o.push(...Object(i.b)(t,e,s.a.Pawn*n,[e=>n>0?e+8:e-8],"moves"))),"moves"!==a&&(o.push(...Object(i.b)(t,e,s.a.Pawn*n,n>0?[t=>0!==s.a.getFile(e)?t+7:t,t=>7!==s.a.getFile(e)?t+9:t]:[t=>0!==s.a.getFile(e)?t-9:t,t=>7!==s.a.getFile(e)?t-7:t],"captures")),r.length>0&&"DOUBLE"===r[r.length-1].special)){let t=r[r.length-1];t.to===e+1&&7!==s.a.getFile(e)?o.push({from:e,to:n>0?e+9:e-7,special:"EP"}):t.to===e-1&&0!==s.a.getFile(e)&&o.push({from:e,to:n>0?e+7:e-9,special:"EP"})}return o}}}o.shortName="P",o.longName="Pawn"},,,,,,,function(e,t,a){"use strict";(function(e){var n=a(2),i=a(71),s=a(38),r=a(66),o=a(12),c=a(17),l=a(33),d=a(28),h=a(67),u=(a(90),a(56)),g=a(1),m=a(70),p=a(13),b=a(6),f=a(18),j=a(68),v=a(15),O=a(19),x=a(23),N=a(5),y=a(26),k=a(31),w=a(10),C=a(0);const T="via Stalemate";t.a=function(){const{uuid:t}=Object(p.h)(),[{colour:a,opponent:S,army:M,opponentArmy:D,deck:E,opponentDeck:P}]=Object(n.useState)((()=>{const e=localStorage.getItem(b.c)||"{}",a=JSON.parse(e)[t];try{a.army=JSON.parse(a.army),a.opponentArmy=JSON.parse(a.opponentArmy),a.deck=JSON.parse(a.deck),a.opponentDeck=JSON.parse(a.opponentDeck)}catch(n){console.log(n)}return a||{colour:1,opponent:"fiesta"===t?"COMP":"LOCAL",army:"dev-playground"===t?f.c:f.d,opponentArmy:"dev-playground"===t?f.c:f.d,deck:O.b,opponentDecl:O.b}})),R=Object(n.useRef)(a>0?new s.a(Object(l.a)(M,D),void 0,E,P):new s.a(Object(l.a)(D,M),void 0,P,E)),B=Object(n.useRef)();Object(n.useLayoutEffect)((()=>{if("COMP"===S){const t=new Worker(e,{name:"opponent-webworker",type:void 0});B.current=m.a(t),console.log("Creating worker!")}else console.log("Not against a computer opponent");document.body.style.display="none",setTimeout((()=>{document.body.style.display="unset"}),0)}),[]);const[I,L]=Object(n.useState)(R.current.getBoard()),[F,A]=Object(n.useState)(R.current.getCurrentTurn()),[H,V]=Object(n.useState)(R.current.getMoves()),[_,q]=Object(n.useState)(0),[J,W]=Object(n.useState)(!1),[U,K]=Object(n.useState)(T);Object(n.useEffect)((()=>{if(J){new Audio("/assets/Sounds/8bit-game-over.mp3").play().then()}}),[J]);const G=async()=>{if("fiesta"===t)return;const{beginBackgroundEvaluation:e}=B.current;let a=R.current.getMoves();e([...R.current.getBoard()],Object(v.a)(a).map((e=>{let{from:t,to:a,moving:n,captured:i,special:s,specify:r}=e;return{from:t,to:a,moving:n,captured:i,special:s,specify:r}})),D.pieces,{colour:-1})},Y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-a;const{moveGenerator:t}=B.current;let n=R.current.getMoves(),i=R.current.getBoard(),s=Object(v.a)(n).map((e=>{let{from:t,to:a,moving:n,captured:i,special:s,specify:r}=e;return{from:t,to:a,moving:n,captured:i,special:s,specify:r}})),r=R.current.getCurrentOngoingEffects().map((e=>({square:e.getSquare(),name:e.getName(),target:e.getTarget(),duration:e.getDurationRemaining()}))),o=(a>0?R.current.getBlackHand():R.current.getWhiteHand()).map((e=>e.id));return await t([...i],s,D.pieces,e,r,o,{colour:e})},{Channel:z,Conn:Q}=Object(n.useContext)(y.b);Object(n.useEffect)((()=>{if("ONLINE"===S&&z)return z.addEventListener("message",X),()=>{z.removeEventListener("message",X)}}),[z,Q]);const X=e=>{let t=JSON.parse(e.data);switch(t.msgType){case"piece_move":console.log("Made a piece move!\n",t.payload);let{from:e,to:n,special:i}=t.payload.move;try{ie(e,n,i,t.payload.additional)}catch(a){console.log(a)}break;case"card_move":console.log("Made a card move!\n",t.payload);let{id:s,targets:r}=t.payload;try{je(s,r,!1)}catch(a){console.log(a)}}},[Z,$]=Object(n.useState)([]),[ee,te]=Object(n.useState)([]),ae=e=>{e>0?te((t=>[...t,e])):e<0&&$((t=>[...t,e]))},ne=e=>{let t=R.current.getMoves(),a=R.current.getBoard(),n=R.current.getCurrentOngoingEffects();if(t.length>=12){let e=t.slice(t.length-12,t.length);Object(u.a)(e[0],e[4],e[8])&&Object(u.a)(e[1],e[5],e[9])&&Object(u.a)(e[2],e[6],e[10])&&Object(u.a)(e[3],e[7],e[11])&&(W(!0),q(0),K("via Move Repetition"))}if(t.length>=100){let e=t.slice(t.length-100,t.length),a=Object(v.a)(e).filter((e=>Math.abs(e.moving)===g.a.Pawn)),n=Object(v.a)(e).filter((e=>0!==e.captured));0===a.length&&0===n.length&&(W(!0),q(0),K("via the Fifty-move rule"))}let i=d.a.getLegalMoves(a,Object(v.a)(t),{colour:-e});0===Object(c.b)(i,a,Object(v.a)(t),-e,n).length&&(W(!0),Object(c.c)(a,Object(v.a)(t),-e)?(q(e>0?1:-1),K("via Checkmate")):(q(0),K(T)))},ie=function(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=R.current.getBoard()[e]>0?1:-1;r===a&&(async()=>{const{endBackgroundEvaluation:e}=B.current;e()})(),new Audio("/assets/Sounds/wooden-piece-move.mp3").play();let o="EP"===i?R.current.getBoard()[n-8*r]:R.current.getBoard()[n];if(o!==g.a.None&&(console.log("CAPTURING A ".concat(o)),ae(o)),R.current.Move(e,n,i,s),ne(r),V([...R.current.getMoves()]),L([...R.current.getBoard()]),"ONLINE"===S&&r===a&&z){let t={move:{from:e,to:n,special:i},additional:s},a=new k.d(t);z.send(JSON.stringify(a))}oe?(re(!0),setTimeout((()=>{A(R.current.getCurrentTurn()),re(!1)}),500)):A(R.current.getCurrentTurn()),setTimeout((()=>{J||R.current.getCurrentTurn()!==-a&&"fiesta"!==t||"COMP"!==S||Y(R.current.getCurrentTurn()).then((e=>{if(!J&&e)try{e.move?ie(e.move.from,e.move.to,e.move.special,e.additional):e.id&&e.targets&&je(e.id,e.targets),G()}catch(t){console.log(t),console.log(e)}}))}),0)},[se,re]=Object(n.useState)(!1),[oe,ce]=Object(n.useState)(!0);Object(n.useEffect)((()=>{"COMP"===S&&-1===a&&(console.log("Generating opening move"),Y().then((e=>{if(e)try{ie(e.move.from,e.move.to,e.move.special,e.additional),G().then((()=>{}))}catch(t){console.log(t),console.log(e)}})))}),[]);const le=()=>{let e=R.current.getLastMove();e&&(R.current.UnMove(),L([...R.current.getBoard()]),V([...R.current.getMoves()]),A(R.current.getCurrentTurn()),e instanceof o.a&&(Z.length>0&&e.captured===Z[Z.length-1]?$((e=>e.slice(0,e.length-1))):ee.length>0&&e.captured===ee[ee.length-1]&&te((e=>e.slice(0,e.length-1)))))},[de,he]=Object(n.useState)(null),[ue,ge]=Object(n.useState)(0),[me,pe]=Object(n.useState)([]),be=()=>{console.log("Drag ended, ".concat(ue," remaining")),fe()},fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;console.log("Ending targeting with ".concat(e," remaining")),0===e&&he(null);let t=document.getElementById("PlayerHand");t&&(t.className="")},je=function(e,n){let i,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i=de?F>0?R.current.getWhiteHand()[de||0]:R.current.getBlackHand()[de||0]:R.current.getCurrentPlayerHand()[R.current.getCurrentPlayerHand().map((e=>e.id)).indexOf(e)],"ONLINE"!==S||s||(i=w.a[e],F>0?R.current.setWhiteHand((e=>e.filter(((e,t)=>0!==t)))):R.current.setBlackHand((e=>e.filter(((e,t)=>0!==t)))));R.current.PlayCard(i,n);let r=R.current.getCurrentTurn();if(ne(r),ne(-r),V(R.current.getMoves()),L(R.current.getBoard()),console.log(S,r,a,z),"ONLINE"===S&&z&&s){let t={id:e,targets:n};console.log("Sending a card message!");let a=new k.a(t);z.send(JSON.stringify(a))}console.log(R.current.getCurrentTurn(),F),setTimeout((()=>{console.log(R.current.getCurrentTurn(),F)}),1e3),i.fast||(oe?(re(!0),setTimeout((()=>{A(R.current.getCurrentTurn()),re(!1)}),500)):A(R.current.getCurrentTurn())),setTimeout((()=>{J||R.current.getCurrentTurn()!==-a&&"fiesta"!==t||"COMP"!==S||Y(R.current.getCurrentTurn()).then((e=>{if(!J&&e)try{e.move?ie(e.move.from,e.move.to,e.move.special,e.additional):e.id&&e.targets&&je(e.id,e.targets),G()}catch(t){console.log(t),console.log(e)}}))}),0)};return Object(C.jsxs)("div",{className:"app paddedTop",children:[Object(C.jsx)("div",{className:"boardLeftColumn"}),Object(C.jsx)("div",{className:"chessBoardColumn ".concat(J?"gameOver":"playing"),children:Object(C.jsx)(i.a,{board:I,currentTurn:F,move:ie,unMove:le,moves:H,whiteCaptured:Z,blackCaptured:ee,capturePiece:ae,whiteArmy:a>0?M.pieces:D.pieces,blackArmy:a<0?M.pieces:D.pieces,playerColour:a,cardTargetingIndex:de,game:R.current,opponent:S,gameUUID:t,allowRotation:oe,setAllowRotation:e=>ce(e),moveLockout:se,playCard:(e,t)=>{let a=ue,n=me;ue<=0&&null!==de&&(a=R.current.getCurrentPlayerHand()[de].targets),a--,console.log("APPEND CARD TARGET - ".concat(a," remaining of ").concat(R.current.getCurrentPlayerHand()[de||0].targets)),n.push(t),ge(a),pe(n),0===a&&(je(e,n),fe(a))},cardTargetsRemaining:ue,currentTargets:me})}),Object(C.jsxs)("div",{className:"boardRightColumn",children:[Object(C.jsxs)("p",{className:"playerToMove",children:[R.current.getCurrentTurn()>0?"White":"Black"," to move"]}),Object(C.jsx)(r.a,{moves:H,unMove:le,canUndo:"LOCAL"===S})]}),Object(C.jsx)("div",{id:"PlayerHand",children:Object(C.jsx)("div",{id:"PlayerHandInner",children:(()=>{const e="LOCAL"===S?F>0?R.current.getWhiteHand():R.current.getBlackHand():a>0?R.current.getWhiteHand():R.current.getBlackHand(),n=e.length;return e.map(((e,i)=>Object(C.jsx)(j.a,{draggable:!se&&(ee.reduce(((e,t)=>{var a;return e+((null===(a=g.a.getPiece(t))||void 0===a?void 0:a.materialValue)||0)}),0)+Z.reduce(((e,t)=>{var a;return e+((null===(a=g.a.getPiece(t))||void 0===a?void 0:a.materialValue)||0)}),0)>=e.cost||"dev-playground"===t)&&!Object(c.c)(I,Object(v.a)(H),F)&&("LOCAL"===S||Object(N.b)(a,F)),card:e,dragStartCallback:()=>(e=>{he(e),pe([]),console.log("Card drag started on ".concat(e,", card ").concat(R.current.getCurrentPlayerHand()[e].cardName));let t=document.getElementById("PlayerHand");t&&(t.className="forceLower")})(i),dragEndCallback:be,handPosition:i+1,handSize:n})))})()})}),Object(C.jsx)(x.a,{}),J?Object(C.jsx)(h.a,{message:U,winner:_}):null]})}}).call(this,a(79))},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(2);var n=a(12),i=(a(88),a(0));function s(e){let{moves:t,unMove:a,canUndo:s}=e;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{id:"BoardMovesDisplay",children:[t.map(((e,t)=>Object(i.jsx)("p",{className:"move",children:Object(i.jsx)("span",{children:e.getMoveName()})},e instanceof n.a?"".concat(e.from).concat(e.to).concat(t):"".concat(e.cardName).concat(t)))),s?Object(i.jsx)("button",{className:"unMakeMove",onClick:a,children:"UnMove!"}):null]})})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(2),i=(a(89),a(0));function s(e){let{winner:t,message:a}=e;const[s,r]=Object(n.useState)(!1);Object(n.useEffect)((()=>{setTimeout((()=>r(!0)),500)}));return Object(i.jsxs)("div",{id:"GameOverUI",className:"".concat(t<0?"black":"white"," ").concat(s?"shown":"hidden"),children:[Object(i.jsxs)("div",{id:"GameOverHeader",children:[Object(i.jsx)("h2",{className:"scoreMessage",children:(()=>{switch(t){case 1:return"1-0";case-1:return"0-1";default:return"0.5-0.5"}})()}),Object(i.jsx)("p",{className:"winnerMessage",children:(()=>{switch(t){case 1:return"White wins";case-1:return"Black wins";default:return"Draw"}})()})]}),Object(i.jsx)("div",{id:"GameOverBody",children:Object(i.jsx)("p",{children:a})}),Object(i.jsx)("button",{onClick:()=>{window.location.reload()},children:"Play Again?"})]})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(2),i=(a(91),a(0));function s(e){const t=Object(n.useRef)(null),a=Object(n.useRef)(null);return Object(n.useLayoutEffect)((()=>{if(a.current){let t=e.handSize%2!==0,n=Math.ceil(e.handSize/2),i=t?n:n+1,s=e.handPosition<=n?n:i,r=5*(e.handPosition-s);0!==r||t||(r+=e.handPosition===n?-2.5:2.5),a.current.style.transform="rotateZ(".concat(r,"deg) translateY(").concat(Math.abs(5*r)-20,"px)")}}),[e.handPosition,e.handSize]),Object(i.jsx)("div",{ref:a,draggable:e.draggable,onDragStart:t=>(t=>{t.dataTransfer&&(e.dragStartCallback(),t.dataTransfer.setData("text/plain",e.card.id))})(t),onDragEnd:()=>{e.dragEndCallback()},className:"playableCardContainer ".concat(e.draggable?"drag":"noDrag"),children:Object(i.jsxs)("div",{ref:t,className:"playableCard",children:[Object(i.jsxs)("div",{className:"cardChaosScore",children:[Object(i.jsx)("div",{className:"score",children:e.card.cost}),Object(i.jsx)("div",{className:"speed",children:e.card.fast?"Fast":""})]}),Object(i.jsx)("div",{className:"cardTitle",children:e.card.cardName}),Object(i.jsx)("div",{className:"cardDescription",children:e.card.description}),Object(i.jsx)("div",{className:"cardExpac",children:e.card.expac})]})})}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(2),i=(a(80),a(32)),s=a(1),r=a(0);function o(e){let{position:t,highlight:a,rotated:n,moveCircle:o=!1,border:c=!1}=e;return Object(r.jsxs)("div",{style:s.a.getStyle(t,n),className:"chessSquare ".concat((7*s.a.getRank(t)+s.a.getFile(t))%2===1?"light":"dark"," ").concat(o?"moveCircle":""," ").concat(c?"border":""),id:"square-".concat(s.a.getSquareName(t)),children:[(()=>{const e=[];return 0===s.a.getRank(t)&&e.push(Object(r.jsx)("span",{className:"sqLabel bottom",children:i.a[s.a.getFile(t)]},"file")),0===s.a.getFile(t)&&e.push(Object(r.jsx)("span",{className:"sqLabel left",children:s.a.getRank(t)+1},"rank")),e})(),a?Object(r.jsx)("div",{className:"highlight"}):null]},"square-".concat(s.a.getSquareName(t)))}a(82),a(83);function c(e){let{position:t,piece:a,target:i,unTarget:o,onHover:c,onUnHover:l,active:d,id:h,draggable:u,rotated:g,onRightClick:m}=e,p=Object(n.useRef)(t),b=Object(n.useRef)(null),f=Object(n.useRef)(null);Object(n.useLayoutEffect)((()=>{if(b.current){let e=b.current,a=s.a.getFile(t)-s.a.getFile(p.current),n=s.a.getRank(t)-s.a.getRank(p.current);g&&(a=-a,n=-n),e.style.transition="none",e.style.transform="translate(".concat(100*-a,"%, ").concat(100*n,"%)"),setTimeout((()=>{e.style.transition="transform 0.25s ease",e.style.transform="translate(0, 0)"}),0)}p.current=t}),[t]),Object(n.useLayoutEffect)((()=>{f.current&&(d||(f.current.style.transform=""))}),[d]);const j=e=>{2===e.button&&(e.preventDefault(),m(h)),0===e.button&&u&&(i("piece-click"),f.current&&(f.current.style.transform="translateY(.25rem) scale(0.95)"))};return Object(r.jsx)("div",{className:"piece ".concat(d?"active":""," ").concat(a>0?"white":"black"),ref:b,id:h,style:s.a.getStyle(t,g),draggable:u,onDragStart:u?e=>{f.current&&(f.current.style.transform=""),e.dataTransfer&&(i("piece-drag"),e.dataTransfer.setData("text/plain",JSON.stringify([a,t])),e.dataTransfer.effectAllowed="move")}:()=>!1,onDragEnd:()=>o("piece-drag"),onMouseEnter:c,onMouseLeave:l,onMouseDown:e=>j(e),onContextMenu:e=>j(e),children:Object(r.jsx)("img",{ref:f,src:s.a.getImage(a),alt:a.toString(),className:"pieceImg"})},h)}a(84);function l(e){let{position:t,onDrop:a,isMove:n,onClick:i,isCapture:o,rotated:c}=e;return Object(r.jsx)("div",{style:s.a.getStyle(t,c),className:"targetingSquare ".concat(n?"move":""," ").concat(o?"capture":""),id:"target_".concat(s.a.getSquareName(t)),onDrop:a,onMouseDown:e=>{e.stopPropagation(),i()},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"}})}a(85);function d(e){let{captures:t,evaluation:a}=e;return Object(r.jsxs)("div",{className:"infoBar",children:[Object(r.jsx)("p",{className:"materialEval",children:0!==a?"("+(a>=0?"+":"")+a+")":""}),t.map(((e,t)=>{var a,n,i,o;return Object(r.jsx)("div",{className:"capturedPiece",children:Object(r.jsx)("img",{title:"".concat(null===(n=s.a.getPiece(e))||void 0===n?void 0:n.longName," (").concat(null===(i=s.a.getPiece(e))||void 0===i?void 0:i.materialValue,")"),src:s.a.getImage(e),alt:(null===(o=s.a.getPiece(e))||void 0===o?void 0:o.shortName)||"unknown piece"})},((null===(a=s.a.getPiece(e))||void 0===a?void 0:a.longName)||"Piece")+"".concat(t))}))]})}var h=a(17);a(28);const u=e=>e.filter((e=>e!==s.a.None)).reduce(((e,t)=>null===s.a.getPiece(t)?e:t>0?e+s.a.getPiece(t).materialValue:t<0?e-s.a.getPiece(t).materialValue:e),0);var g=a(12);a(87);function m(e){let{above:t,positionFrom:a,positionTo:n,validPieces:i,promoting:o,callback:c,rotated:l}=e;const d=()=>{let e=Math.max(Math.min(s.a.getFile(n)-i.length/2,8-i.length),0);return Object.assign({width:"".concat(12.5*i.length,"%")},l?{left:"".concat(12.5*(8-e-i.length),"%"),top:"".concat(12.5*(s.a.getRank(n)+(t?-1:1)),"%"),borderBottomLeftRadius:t&&e+i.length===s.a.getFile(n)+1?"0":"1rem",borderBottomRightRadius:t&&0===s.a.getFile(n)?"0":"1rem",borderTopLeftRadius:t||e+i.length!==s.a.getFile(n)+1?"1rem":"0",borderTopRightRadius:t||0!==s.a.getFile(n)?"1rem":"0"}:{left:"".concat(12.5*e,"%"),top:"".concat(12.5*(7-s.a.getRank(n)+(t?1:-1)),"%"),borderTopRightRadius:t&&e+i.length===s.a.getFile(n)+1?"0":"1rem",borderTopLeftRadius:t&&0===s.a.getFile(n)?"0":"1rem",borderBottomRightRadius:t||e+i.length!==s.a.getFile(n)+1?"1rem":"0",borderBottomLeftRadius:t||0!==s.a.getFile(n)?"1rem":"0"})},h=()=>Object(r.jsx)("div",{id:"PiecePromotionHead",style:l?{left:"".concat(12.5*(7-s.a.getFile(n)),"%"),top:"".concat(12.5*s.a.getRank(n),"%"),borderRadius:t?"0 0 1rem 1rem":"1rem 1rem 0 0"}:{left:"".concat(12.5*s.a.getFile(n),"%"),top:"".concat(12.5*(7-s.a.getRank(n)),"%"),borderRadius:t?"1rem 1rem 0 0":"0 0 1rem 1rem"},children:Object(r.jsx)("img",{src:s.a.getImage(o),alt:""})}),u=()=>Object(r.jsx)("div",{id:"PiecePromotionBody",style:d(),children:i.map((e=>Object(r.jsx)("div",{className:"promotionPiece",style:{width:"".concat(100/i.length,"%")},onMouseDown:()=>c(o,e,a,n),children:Object(r.jsx)("img",{src:s.a.getImage(e),alt:""})})))});return l?t?Object(r.jsxs)(r.Fragment,{children:[" ",u()," ",h()]}):Object(r.jsxs)(r.Fragment,{children:[" ",h()," ",u()," "]}):t?Object(r.jsxs)(r.Fragment,{children:[" ",h()," ",u()]}):Object(r.jsxs)(r.Fragment,{children:[" ",u()," ",h()," "]})}var p=a(33),b=a(15),f=a(10);function j(e){let{board:t,currentTurn:a,game:i,move:j,unMove:v,moves:O,whiteCaptured:x,blackCaptured:N,capturePiece:y,whiteArmy:k,blackArmy:w,playerColour:C,opponent:T,gameUUID:S,moveLockout:M,allowRotation:D,setAllowRotation:E,cardTargetingIndex:P,playCard:R,cardTargetsRemaining:B,currentTargets:I}=e;const L=(-1===C&&"LOCAL"!==T||-1===a&&"LOCAL"===T)&&"dev-playground"!==S&&D,[F]=Object(n.useState)("dev-playground"===S),A=(e,a,n,i)=>{if(Math.abs(e)===s.a.Pawn&&s.a.getRank(n)===(e>0?7:0)){z([a,n]);let e="EP"===i?t[n-8]:t[n];return void(e!==s.a.None&&y(e))}"EP"===i?t[n-8]:t[n];j(a,n,i),_([0,0])},H=(e,t)=>{let a=t,n=1;if(O.length>0){let i=[...O].reverse(),r=!1;a=i.reduce(((t,a,s)=>r?t:(n=i.length-s,a instanceof g.a?(a.to===t&&"PROMOTION"===a.special&&a.additional.promotionTo===e&&(r=!0),a.to!==t||a.moving!==e||r?t:a.from):f.a[a.cardName].trackPiece(t,a.targets))),t),Math.abs(e)!==s.a.Rook&&Math.abs(e)!==s.a.Bede||(a=i.reduce(((t,a,n)=>{if(a instanceof g.a){let n=a.to===t&&a.moving===e,i="CASTLE"===a.special&&(a.to===t+1||a.to===t-1);return n?a.from:i&&Math.abs(e)===s.a.Bede?a.to===t+1?a.to+1:a.to-1:i?a.to===t+1?a.to+1:a.to-2:t}return t}),t))}return"".concat(a,"-").concat(e,"-").concat(n)},[V,_]=Object(n.useState)([0,-1]),[q,J]=Object(n.useState)("piece-click"),W=(e,t)=>{_(e),J(t)};Object(n.useLayoutEffect)((()=>{null!==P&&J("card-drag")}),[P]);const[U,K]=Object(n.useState)(-1),[[G,Y],z]=Object(n.useState)([-1,-1]),[Q,X]=Object(n.useState)(-1),[Z,$]=Object(n.useState)(""),ee=(e,t)=>{X(e),$(t),window.addEventListener("click",te),window.addEventListener("dragstart",te)},te=e=>{let t=document.getElementById("PieceInfoBubble");if(t){let{x:a,y:n,width:i,height:s}=t.getBoundingClientRect();(e.pageX<a||e.pageX>a+i||e.pageY<n||e.pageY>n+s)&&(X(-1),window.removeEventListener("click",te))}};Object(n.useLayoutEffect)((()=>{let e=document.getElementById(Z),t=document.getElementById("PieceInfoBubble");if(t&&e){let{x:a,y:n,height:i,width:s}=e.getBoundingClientRect(),{height:r,width:o}=t.getBoundingClientRect(),c=10;if(window.visualViewport&&window.window.visualViewport){let e=window.window.visualViewport.height-r/2,l=n+i/2-r/2,d=Math.min(e,Math.max(c,l));t.style.top="".concat(d,"px");let h=a+20<window.innerWidth/2,u=0,g=window.innerHeight-o/2,m=h?a-o-10:window.visualViewport.width-a-s-o-10,p=Math.min(g,Math.max(u,m));h?(t.style.left="".concat(p,"px"),t.style.right=""):(t.style.right="".concat(p,"px"),t.style.left="")}}}),[Z,Q]);const[ae,ne]=Object(n.useState)("white"),[ie,se]=Object(n.useState)(!1),re=(e,t)=>e.cards.filter((e=>e===t)).length;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d,{captures:L?x:N,evaluation:-u(t)*(L?-1:1)}),Object(r.jsxs)("div",{id:"ChessBoardWrapper",children:[Object(r.jsxs)("div",{id:"ChessBoardOuter",children:[Object(r.jsx)("div",{id:"ChessBoardSquares",className:"board",children:t.map(((e,t)=>{let a=O.filter((e=>e instanceof g.a)),n=i.getCurrentOngoingEffects().reduce(((e,t)=>-1===e.indexOf(t.getSquare())?[...e,t.getSquare()]:e),[]);return Object(r.jsx)(o,{position:t,rotated:L,moveCircle:!1,border:-1!==n.indexOf(t),highlight:a.length>=1&&(t===a[a.length-1].to||t===a[a.length-1].from)})}))}),0!==V[0]||null!==P?Object(r.jsx)("div",{id:"ChessBoardTargeting",className:"board",onMouseDown:()=>W([0,-1],q),children:(()=>{if(null===P)return s.a.getPiece(V[0])?Object(h.b)(s.a.getPiece(V[0]).getLegalMoves(V[1],t,"all",V[0]>0?1:-1,O.filter((e=>e instanceof g.a))),t,O.filter((e=>e instanceof g.a)),V[0]>0?1:-1,i.getCurrentOngoingEffects()).map((e=>Object(r.jsx)(l,{position:e.to,isCapture:t[e.to]!==s.a.None||"EP"===e.special,isMove:t[e.to]===s.a.None,onClick:()=>A(V[0],e.from,e.to,e.special),onDrop:t=>((e,t,a)=>{let[n,i]=JSON.parse(e.dataTransfer.getData("text/plain"));A(n,i,t,a)})(t,e.to,e.special),rotated:L}))):null;{let e=i.getCurrentPlayerHand()[P],n=0===B?0:e.targets-B,s=e.getValidTargets[n];return s=s||e.getValidTargets[0],s?s(t,a,Object(b.a)(O),I,i.getCurrentOngoingEffects()).filter((t=>Object(h.a)(i,e.id,[...I,t],a))).map((e=>Object(r.jsx)(l,{position:e,isCapture:!1,isMove:!0,onClick:()=>(e=>{if(null!==P){let t=i.getCurrentPlayerHand()[P];R(t.id,e)}})(e),onDrop:t=>((e,t)=>{if(e.dataTransfer){let a=e.dataTransfer.getData("text/plain");R(a,t)}})(t,e),rotated:L}))):null}})()}):null,Object(r.jsx)("div",{id:"ChessBoardPieces",className:"board ".concat(0!==V[0]?"targeting ".concat(q," ").concat(V[0]>0?"whitemove":"blackmove"):""," ").concat(null===P?"":"card-targeting"),children:t.map(((e,t)=>0===e?null:Object(r.jsx)(c,{position:t,piece:e,id:H(e,t),draggable:(a>0&&e>0&&(C>0||"LOCAL"===T)||a<0&&e<0&&(C<0||"LOCAL"===T))&&!M||F,clickable:(a>0&&e>0&&(C>0||"LOCAL"===T)||a<0&&e<0&&(C<0||"LOCAL"===T))&&!M||F,target:a=>W([e,t],a),unTarget:e=>W([0,-1],e),onHover:()=>K(t),onUnHover:()=>K(-1),onRightClick:e=>ee(t,e),active:V[1]===t||-1===V[1],rotated:L},H(e,t))))}),Object(r.jsx)("div",{id:"ChessBoardMoveCircles",className:"board",children:(()=>{var e;let a=[],n=-1===U?[]:null===(e=s.a.getPiece(t[U]))||void 0===e?void 0:e.getLegalMoves(U,Object(p.b)(),"all",t[U]>0?1:-1,O.filter((e=>e instanceof g.a))).filter((e=>e.to!==e.from)).map((e=>Object(r.jsx)(o,{position:e.to,rotated:L,moveCircle:!0,highlight:!1})));return n&&a.push(...n),U!==V[1]&&s.a.getPiece(V[0])&&a.push(...Object(h.b)(s.a.getPiece(V[0]).getLegalMoves(V[1],t,"all",V[0]>0?1:-1,O.filter((e=>e instanceof g.a))),t,O.filter((e=>e instanceof g.a)),V[0]>0?1:-1,i.getCurrentOngoingEffects()).map((e=>Object(r.jsx)(o,{position:e.to,rotated:L,moveCircle:!0,highlight:!1})))),a})()}),-1!==G?Object(r.jsx)(m,{above:7===s.a.getRank(Y),positionFrom:G,positionTo:Y,validPieces:(e=>{let t=e>0?k:w;return console.log(e),t.filter((e=>Math.abs(e)!==s.a.King)).reduce(((e,t)=>-1===e.indexOf(t)?[...e,t]:e),[]).filter((e=>Math.abs(e)!==s.a.King)).sort(((e,t)=>e-t)).map((t=>e>0?t:-t))})(t[G]>0?1:-1),promoting:G>0?t[G]:s.a.None,callback:(e,t,a,n)=>{j(a,n,"PROMOTION",{promotionTo:t}),z([-1,-1])},rotated:L}):null]}),Object(r.jsxs)("div",{id:"ChaosValue",title:"Chaos Value - the material value of all pieces captured. Must meet a threshold before cards can be played.",children:[Object(r.jsx)("div",{className:"val",id:"ChaosValueScore",children:i.getChaosScore()}),Object(r.jsx)("div",{className:"sub",children:"CHAOS VALUE"})]}),Object(r.jsxs)("div",{id:"BlackDeck",title:"Click to see cards",className:"deck",onClick:()=>{ne(L?"white":"black"),se(!0)},children:[Object(r.jsxs)("p",{children:[L?"White":"Black"," Deck"]}),Object(r.jsxs)("p",{children:[(L?i.getWhiteCurrentDeck():i.getBlackCurrentDeck()).length," card/s remaining"]})]}),Object(r.jsxs)("div",{id:"WhiteDeck",title:"Click to see cards",className:"deck",onClick:()=>{ne(L?"black":"white"),se(!0)},children:[Object(r.jsxs)("p",{children:[L?"Black":"White"," Deck"]}),Object(r.jsxs)("p",{children:[(L?i.getBlackCurrentDeck():i.getWhiteCurrentDeck()).length," card/s remaining "]})]}),Object(r.jsx)("div",{id:"HandNotice",children:Object(r.jsxs)("p",{className:"hand",children:["Opponent has ",L?i.getWhiteHand().length:i.getBlackHand().length," card/s in hand"]})}),(()=>{let e="white"===ae?i.getWhiteDeck():i.getBlackDeck();return Object(r.jsxs)("div",{id:"DeckOverlay",className:ie?"shown":"hidden",children:[Object(r.jsx)("div",{className:"close",onClick:()=>se(!1),children:"x"}),[...e.cards].filter(((e,t,a)=>a.indexOf(e)===t)).map((e=>f.a[e])).map((t=>Object(r.jsxs)("div",{className:"deckOverlayCard",children:[Object(r.jsxs)("div",{className:"topRow",children:[Object(r.jsx)("p",{className:"chaosCost",children:t.cost}),Object(r.jsx)("p",{className:"speed",children:t.fast?"fast":""})]}),Object(r.jsx)("p",{className:"title",children:t.cardName}),Object(r.jsx)("p",{className:"desc",children:t.description}),Object(r.jsx)("p",{className:"expac",children:t.expac}),Object(r.jsxs)("p",{className:"quantity",children:["x",re(e,t.id)]})]})))]})})()]}),Object(r.jsx)(d,{captures:L?N:x,evaluation:u(t)*(L?-1:1)}),(()=>{if(-1===Q)return null;let e=t[Q],a=s.a.getPiece(e);if(!a)return null;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{id:"PieceInfoBubble",style:{position:"absolute"},children:[Object(r.jsx)("div",{onContextMenu:e=>e.preventDefault(),onMouseDown:()=>X(-1),className:"exit",children:"\u2716"}),Object(r.jsx)("h3",{id:"PieceInfoPieceTitle",children:a.longName}),Object(r.jsx)("div",{className:"imgRow",children:Object(r.jsx)("img",{src:s.a.getImage(e)})}),Object(r.jsx)("div",{className:"pieceDescBlock moves",children:a.movesDescription}),Object(r.jsx)("div",{className:"pieceDescBlock moves",children:a.specialMoves.map(((e,t)=>Object(r.jsx)("div",{className:"move",children:e})))}),Object(r.jsx)("div",{className:"pieceDescBlock notes",children:a.notes}),Object(r.jsx)("div",{className:"pieceDescBlock effects",children:i.getCurrentOngoingEffects().filter((e=>e.getSquare()===Q)).map(((e,t)=>Object(r.jsxs)("p",{children:[e.getToolTip()," ",e.getDurationRemaining()," turn",1===e.getDurationRemaining()?"":"s"," remaining."]})))}),Object(r.jsxs)("div",{className:"pieceDescBlock tags",children:["Tags: ",a.categories.map(((e,t)=>Object(r.jsxs)("span",{className:"tag",children:[e,t!==a.categories.length-1?", ":""]})))]})]})})})(),Object(r.jsxs)("div",{className:"allowRotationCheckbox",children:[Object(r.jsx)("input",{type:"checkbox",checked:D,onChange:e=>E(e.target.checked)}),Object(r.jsx)("label",{children:"Allow rotation?"})]})]})}},,,,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/js/opponent-webworker.6cdda936.chunk.worker.js"},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),s=a(63),r=a.n(s);a(78);var o=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,111)).then((t=>{let{getCLS:a,getFID:n,getFCP:i,getLCP:s,getTTFB:r}=t;a(e),n(e),i(e),s(e),r(e)}))},c=a(13),l=a(64),d=a(23),h=a(18),u=(a(104),a(11)),g=a(72),m=a(24),p=a(6),b=a(1),f=a(21),j=a(19),v=a(26),O=a(31),x=a(0);function N(){const[e,t]=Object(n.useState)([]),[a,i]=Object(n.useState)([]),[s,r]=Object(n.useState)([]);Object(n.useLayoutEffect)((()=>{(()=>{let e=localStorage.getItem(p.a),a=[];if(a.push(h.d,h.b),e){let t=JSON.parse(e);a.push(...Object.values(t))}t(a)})(),(()=>{let e=localStorage.getItem(p.b),t=[];if(t.push(j.d,j.a),e){let a=JSON.parse(e);t.push(...Object.values(a))}i(t)})(),(()=>{let e=localStorage.getItem(p.c),t=[];if(e){let a=JSON.parse(e);t.push(...Object.values(a))}r(t)})()}),[]);const[o,l]=Object(n.useState)("LOCAL"),[N,T]=Object(n.useState)("WHITE"),[S,M]=Object(n.useState)(0),[D,E]=Object(n.useState)(0),[P,R]=Object(n.useState)(0),[B,I]=Object(n.useState)(0),L=e=>e.filter((e=>6!==e)).reduce(((e,t)=>{var a;return((null===(a=b.a.getPiece(t))||void 0===a?void 0:a.materialValue)||0)+e}),0),[F,A]=Object(n.useState)(!1),H=e=>{let t=JSON.parse(e.army),a=JSON.parse(e.opponentArmy),n={ONLINE:"Online Opponent",LOCAL:"Local Opponent",COMP:"Computer Opponent"}[e.opponent];return Object(x.jsx)(f.b,{to:"/play/game/".concat(e.uuid),children:Object(x.jsxs)("div",{title:"Game ".concat(e.uuid),className:"existingGame",children:[Object(x.jsxs)("p",{children:[e.colour>0?t.name:a.name,","]}),Object(x.jsx)("p",{children:e.colour<0?t.name:a.name}),Object(x.jsxs)("p",{children:["vs ",n]})]})})},{Conn:V,Channel:_,setListener:q,initChannel:J}=Object(n.useContext)(v.b),[W,U]=Object(n.useState)(!1),[K,G]=Object(n.useState)(!1),Y=Object(c.f)();Object(n.useEffect)((()=>{"ONLINE"===o&&_?(console.log("Adding event listener to channel ".concat(_.id)),_.addEventListener("message",z)):"ONLINE"===o&&console.log("Online, but Channel not currently defined: \n",_)}),[o,_]);const z=t=>{let n=JSON.parse(t.data);switch(console.log(n),n.msgType){case"setup_choice":switch(console.log("received a setup choice"),n.payload.data){case"WHITE":T("BLACK");break;case"BLACK":T("WHITE");break;default:T("RANDOM")}break;case"ready":console.log("Your opponent has signalled they are ready!"),U(!0);break;case"game_start_request":console.log("Your opponent has sent a request to start the game"),(t=>{if(!_)return void console.warn("TRIED TO LOAD INTO GAME, BUT NO DATA CHANNEL!");const n=Object(g.a)();let i=1,s=e[0],r=a[0];T((e=>(i="RANDOM"===e?Object(m.a)([-1,1]):["BLACK","","WHITE"].indexOf(e)-1,e))),M((t=>(s=-1===t?Object(m.a)(e):e[t],t))),R((e=>(r=-1===e?Object(m.a)(a):a[e],e)));let c=t.payload.army,l=t.payload.deck;const d={uuid:n,opponent:o,colour:i,army:JSON.stringify(s),opponentArmy:JSON.stringify(c),deck:JSON.stringify(r),opponentDeck:JSON.stringify(l)};let h=new O.c(d);_.send(JSON.stringify(h));const u=localStorage.getItem(p.c)||"{}",b=JSON.parse(u);b[n]=d,localStorage.setItem(p.c,JSON.stringify(b)),console.log("Loading into game with the following game data \n",d),Y.push("/play/game/".concat(n))})(n);break;case"game_start_response":console.log("Response received from opponent - game ready to start"),(e=>{let t=e.payload,a=Object(g.a)(),n={uuid:a,opponent:t.opponent,army:t.opponentArmy,opponentArmy:t.army,deck:t.opponentDeck,opponentDeck:t.deck,colour:-1===t.colour?1:-1};const i=localStorage.getItem(p.c)||"{}",s=JSON.parse(i);s[a]=n,localStorage.setItem(p.c,JSON.stringify(s)),console.log("Received the following game data\n",t),console.log("Loading into game with the following game data\n",n),Y.push("/play/game/".concat(a))})(n)}},Q=e=>{if(T(e),"ONLINE"!==o||!_)return;let t=e,a=new O.f({choice:"colour",data:t});console.log("Sending a message via channel ".concat(_.id,"!")),_.send(JSON.stringify(a))};return Object(x.jsxs)("div",{id:"PlayPage",className:"paddedTop",children:[Object(x.jsx)(d.a,{}),Object(x.jsx)("h1",{children:"Setup your game!"}),Object(x.jsxs)("p",{onClick:()=>A((e=>!e)),className:"toggleExistingGames",children:[F?"Hide":"Show"," current games"]}),Object(x.jsx)("div",{className:"existingGames",children:F?s.map(H):null}),Object(x.jsxs)("div",{className:"playPageInner",children:[Object(x.jsx)("h3",{children:"Who do you want to face?"}),Object(x.jsx)(C,{item:"LOCAL OPPONENT",selected:"LOCAL"===o,onPress:()=>l("LOCAL"),disabled:K}),Object(x.jsx)(C,{item:"COMPUTER OPPONENT",selected:"COMP"===o,onPress:()=>l("COMP"),disabled:K}),Object(x.jsx)(C,{item:"ONLINE",selected:"ONLINE"===o,onPress:()=>l("ONLINE"),disabled:"connected"!==V.connectionState||K,toolTip:w}),Object(x.jsx)("h3",{children:"Which colour do you want to play as?"}),Object(x.jsx)(C,{item:"WHITE",selected:"WHITE"===N,onPress:Q,disabled:K}),Object(x.jsx)(C,{item:"BLACK",selected:"BLACK"===N,onPress:Q,disabled:K}),Object(x.jsx)(C,{item:"RANDOM",selected:"RANDOM"===N,onPress:Q,disabled:K}),Object(x.jsx)("h3",{children:"Which army do you want to use?"}),e.map(((e,t)=>Object(x.jsx)(C,{item:e.name.toUpperCase(),selected:S===t,onPress:()=>M(t),disabled:L(e.pieces)>31||K,toolTip:y}))),Object(x.jsx)(C,{item:"RANDOM",selected:-1===S,onPress:()=>M(-1),disabled:K}),"ONLINE"===o?null:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:"Which army do you want your opponent to use?"}),e.map(((e,t)=>Object(x.jsx)(C,{item:e.name.toUpperCase(),selected:D===t,onPress:()=>E(t),disabled:L(e.pieces)>31,toolTip:y}))),Object(x.jsx)(C,{item:"RANDOM",selected:-1===D,onPress:()=>E(-1)})]}),Object(x.jsx)("h3",{children:"Which deck do you want to use?"}),a.map(((e,t)=>Object(x.jsx)(C,{item:e.name.toUpperCase(),selected:P===t,onPress:()=>R(t),disabled:15!==e.cards.length||K,toolTip:k}))),Object(x.jsx)(C,{item:"RANDOM",selected:-1===P,onPress:()=>R(-1),disabled:K}),"ONLINE"===o?null:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:"Which deck do you want your opponent to use?"}),a.map(((e,t)=>Object(x.jsx)(C,{item:e.name.toUpperCase(),selected:B===t,onPress:()=>I(t),disabled:15!==e.cards.length,toolTip:k}))),Object(x.jsx)(C,{item:"RANDOM",selected:-1===B,onPress:()=>I(-1)})]}),Object(x.jsx)("div",{className:"centred",children:"ONLINE"!==o?Object(x.jsx)(u.a,{onClick:()=>(()=>{const t=Object(g.a)();let n="RANDOM"===N?Object(m.a)([-1,1]):["BLACK","","WHITE"].indexOf(N)-1,i=-1===S?Object(m.a)(e):e[S],s=-1===D?Object(m.a)(e):e[D],r=-1===P?Object(m.a)(a):a[P],c=-1===B?Object(m.a)(a):a[B];const l={uuid:t,opponent:o,colour:n,army:JSON.stringify(i),opponentArmy:JSON.stringify(s),deck:JSON.stringify(r),opponentDeck:JSON.stringify(c)},d=localStorage.getItem(p.c)||"{}",h=JSON.parse(d);h[t]=l,localStorage.setItem(p.c,JSON.stringify(h)),window.location.href="/play/game/".concat(t)})(),text:"START GAME",buttonStyle:"medium"}):Object(x.jsx)(u.a,{onClick:()=>(()=>{if(!_)return void console.warn("Tried to ready, but not connected!");if(G(!0),!W){let e=new O.e;return void _.send(JSON.stringify(e))}let t={army:e[S],deck:a[P]},n=new O.b(t);_.send(JSON.stringify(n))})(),text:K?W?"Getting into game...":"Waiting for opponent":"I'm Ready!",buttonStyle:"medium",disabled:K})})]})]})}const y="Army too strong - edit it to play with it.",k="Your deck has the incorrect number of cards - edit it to play with it.",w="You must be connected to another player to play online.";function C(e){let{selected:t,item:a,onPress:n,itemToString:i=(e=>e),toolTip:s,disabled:r=!1}=e;return Object(x.jsx)("div",{title:r?s:"",className:"selectionItem ".concat(t?"selected":""," ").concat(r?"disabled":""),onClick:r?()=>{}:()=>n(a),children:i(a)})}function T(){const{url:e}=Object(c.i)();return Object(x.jsxs)(c.c,{children:[Object(x.jsx)(c.a,{path:"".concat(e),exact:!0,children:Object(x.jsx)(N,{})}),Object(x.jsx)(c.a,{path:"".concat(e,"/game/:uuid"),children:Object(x.jsx)(l.a,{})})]})}a(105);function S(){const e=e=>{let t=localStorage.getItem(p.a);if(t){let a=JSON.parse(t);a[e]&&delete a[e],localStorage.setItem(p.a,JSON.stringify(a)),window.location.reload()}};return Object(x.jsxs)("div",{id:"ArmiesPage",className:"paddedTop",children:[Object(x.jsx)(d.a,{}),Object(x.jsx)("h1",{className:"pageHeading",children:"Your Armies"}),Object(x.jsx)("p",{className:"pageSubtitle",children:"Where you can view, edit, create and delete armies."}),Object(x.jsx)("p",{className:"pageSubtitle",children:"Click on an army to edit it, hover over an army to delete it."}),Object(x.jsx)("div",{className:"armiesButtonRow",children:Object(x.jsx)(u.a,{onClick:()=>(()=>{let e=localStorage.getItem(p.a),t="";if(e){let a=JSON.parse(e);for(t=prompt("Enter a name for your army","My Army")||"My Army";a[t];)t=prompt("That name has already been chosen")||"My Army";let n=Object.assign({[t]:new h.a(h.d.pieces,t)},a);localStorage.setItem(p.a,JSON.stringify(n))}else{t=prompt("Enter a name for your army","My Army")||"My Army";let e={[t]:new h.a(h.d.pieces,t)};localStorage.setItem(p.a,JSON.stringify(e))}window.location.href="/armies/".concat(t)})(),text:"NEW ARMY",buttonStyle:"small"})}),Object(x.jsx)("div",{className:"armiesListing",children:(()=>{let e=[],t=localStorage.getItem(p.a);if(t){let a=JSON.parse(t);Object.keys(a).map((t=>e.push(a[t])))}return e})().map((t=>Object(x.jsx)(M,{army:t,deleteArmy:e})))})]})}function M(e){let{army:t,deleteArmy:a}=e;return Object(x.jsxs)("div",{className:"armyPreview",onClick:()=>window.location.href="/armies/".concat(t.name),children:[Object(x.jsx)("div",{className:"delete",onClick:e=>{e.stopPropagation(),a(t.name)},children:"\u2716"}),Object(x.jsx)("h3",{className:"ArmyName",children:t.name}),Object(x.jsx)("div",{className:"pieces",children:t.pieces.map((e=>{var t;return Object(x.jsx)("p",{children:(null===(t=b.a.getPiece(e))||void 0===t?void 0:t.longName)||"name error"})}))})]})}a(106);function D(){var e,t,a,i,s,r,o,l;let{armyID:g}=Object(c.h)(),[m,f]=Object(n.useState)(""),[j,v]=Object(n.useState)([1,1,1,1,1,1,1,1]),[O,N]=Object(n.useState)(!1);Object(n.useLayoutEffect)((()=>{let e=localStorage.getItem(p.a);if(e){let t=JSON.parse(e);f(t[g].name),v(t[g].pieces)}else alert("No army detected. Redirecting to army menu."),window.location.href="./armies"}),[]);let[y,k]=Object(n.useState)(0);const w=(e,t,a)=>{if(e.dataTransfer){let n="".concat(t);void 0!==a&&(n+="-".concat(a)),e.dataTransfer.setData("text",n),e.dataTransfer.effectAllowed="move"}},C=(e,t)=>{let a=document.getElementById("ArmyChessBoard");if(a&&Math.abs(j[t])!==b.a.King){let{top:n,height:i,left:s,width:r}=a.getBoundingClientRect(),{clientX:o,clientY:c}=e;if(c<n||c>n+i||o<s||o>s+r){let e=[...j].map(((e,a)=>a===t?b.a.None:e));v(e),N(!0),T.current&&(T.current.className="",e.filter((e=>6!==e)).reduce(((e,t)=>{var a;return((null===(a=b.a.getPiece(t))||void 0===a?void 0:a.materialValue)||0)+e}),0)>31&&setTimeout((()=>{T.current&&(T.current.className="invalid")}),0))}}};let T=Object(n.useRef)(null);const S=()=>j.filter((e=>6!==e)).reduce(((e,t)=>{var a;return((null===(a=b.a.getPiece(t))||void 0===a?void 0:a.materialValue)||0)+e}),0),M=(e,t)=>{let a=e.dataTransfer.getData("text").split("-");console.log(a);let n=Number(a[0]),i=Number(a[1]||-1);if(4!==t&&Math.abs(n)!==b.a.King&&b.a.getPiece(n)){let e=j[t]||b.a.None;console.log(e);let a=[...j].map(((a,s)=>s===t?n:s===i?e:a));v(a),N(!0),T.current&&(T.current.className="",a.filter((e=>6!==e)).reduce(((e,t)=>{var a;return((null===(a=b.a.getPiece(t))||void 0===a?void 0:a.materialValue)||0)+e}),0)>31&&setTimeout((()=>{T.current&&(T.current.className="invalid")}),0))}};return Object(x.jsxs)("div",{id:"ArmiesBuilderPage",className:"paddedTop",children:[Object(x.jsx)(d.a,{}),Object(x.jsx)("h1",{children:g}),Object(x.jsxs)("div",{className:"armiesManager",children:[Object(x.jsx)("div",{className:"pieceInfoPreview",children:Object(x.jsx)("div",{className:"pieceInfoPreviewBox ".concat(0===y?"noPreview":"preview"),children:0===y?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"faded",children:"Hover over a piece to look at it."}),Object(x.jsx)("p",{className:"faded",children:"Drag pieces to change your army."})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"PieceInfo",children:null===(e=b.a.getPiece(y))||void 0===e?void 0:e.longName}),Object(x.jsx)("div",{className:"imgContainer",children:Object(x.jsx)("img",{src:b.a.getImage(y)})}),y===b.a.Pawn?Object(x.jsx)("p",{className:"faded",children:"You cannot change your front row of pawns."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]}),y===b.a.King?Object(x.jsx)("p",{className:"faded",children:"This piece cannot be moved, swapped or altered."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]}),Object(x.jsxs)("p",{className:"info",children:[Object(x.jsx)("b",{children:"Notation:"})," ",null===(t=b.a.getPiece(y))||void 0===t?void 0:t.shortName," ",Object(x.jsx)("br",{}),Object(x.jsx)("b",{children:"Value:"})," ",y===b.a.King?"Infinity":null===(a=b.a.getPiece(y))||void 0===a?void 0:a.materialValue," ",Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),null===(i=b.a.getPiece(y))||void 0===i?void 0:i.movesDescription," ",Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),null===(s=b.a.getPiece(y))||void 0===s?void 0:s.specialMoves.map(((e,t,a)=>Object(x.jsxs)(x.Fragment,{children:[e,t+1===a.length?Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("br",{}),Object(x.jsx)("br",{})," "]}):null]}))),null!==(r=b.a.getPiece(y))&&void 0!==r&&r.notes?Object(x.jsxs)(x.Fragment,{children:[null===(o=b.a.getPiece(y))||void 0===o?void 0:o.notes,Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]}):null]}),Object(x.jsxs)("p",{className:"faded",children:["Tags:",null===(l=b.a.getPiece(y))||void 0===l?void 0:l.categories.map(((e,t,a)=>Object(x.jsxs)(x.Fragment,{children:[" ",e,t+1===a.length?"":","]})))]})]})})}),Object(x.jsx)("div",{className:"piecesList",children:Object(x.jsx)("div",{className:"pieceLibrary",children:b.a.PIECES.filter((e=>{var t;return b.a.getPiece(e)&&-1===(null===(t=b.a.getPiece(e))||void 0===t?void 0:t.categories.indexOf("Token"))})).map(((e,t)=>Object(x.jsx)("div",{className:"libraryPiece",onMouseOver:()=>k(e),children:Object(x.jsx)("img",{src:b.a.getImage(e),draggable:e!==b.a.King,onDragStart:t=>w(t,e)})})))})}),Object(x.jsx)("div",{className:"lowerBoard",children:Object(x.jsxs)("div",{className:"chessBoardPadding",children:[Object(x.jsx)("div",{className:"pointBuyCounter",children:Object(x.jsxs)("p",{children:["Point Buy: ",Object(x.jsxs)("strong",{ref:T,children:[S(),"/31 "]})," "]})}),Object(x.jsxs)("div",{className:"chessBoard",id:"ArmyChessBoard",style:{width:"100%"},children:[(()=>{let e=[];for(let t=0;t<=7;t++)e.push(Object(x.jsx)("div",{style:{left:"".concat(12.5*t,"%")},className:"lowerBoardSquare ".concat(t%2===0?"dark":"light")}));return e})(),j.map(((e,t)=>Object(x.jsx)("div",{className:"lowerBoardPiece",style:{left:"".concat(12.5*t,"%")},onDrop:e=>M(e,t),onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},children:e===b.a.None?null:Object(x.jsx)("img",{src:b.a.getImage(e),draggable:!0,onDragStart:a=>w(a,e,t),onDragEnd:e=>C(e,t)})})))]})]})})]}),O?Object(x.jsx)("div",{className:"saveChanges",children:Object(x.jsx)(u.a,{onClick:()=>{if(S()>31){if(!window.confirm("Your army is over the point buy limit. You will not be able to play with this army. Are you sure you want to save?"))return}let e=localStorage.getItem(p.a);if(e){let t=JSON.parse(e),a=prompt("Choose your army's name",m)||m;a!==m&&delete t[m],t[a]=new h.a(j,a),localStorage.setItem(p.a,JSON.stringify(t)),window.location.href="/armies"}},text:"Save Changes"})}):null]})}function E(){const{url:e}=Object(c.i)();return Object(x.jsxs)(c.c,{children:["o",Object(x.jsx)(c.a,{path:"".concat(e),exact:!0,children:Object(x.jsx)(S,{})}),Object(x.jsx)(c.a,{path:"".concat(e,"/:armyID"),children:Object(x.jsx)(D,{})})]})}a(107);var P=a.p+"static/media/scattered-pieces.cb6ab08a.svg",R=a.p+"static/media/scattered-cards.12f3c5de.svg";function B(){const e=Object(n.useRef)(null);return Object(x.jsxs)("div",{id:"HomepageMain",children:[Object(x.jsx)("h1",{className:"MainTitle",children:"Epic Fantasy Chess"}),Object(x.jsxs)("div",{className:"buttonsRow",children:[Object(x.jsx)(u.a,{onClick:"/play",text:"PLAY",buttonStyle:"medium"}),Object(x.jsx)(u.a,{onClick:"/armies",text:"ARMIES",buttonStyle:"medium"}),Object(x.jsx)(u.a,{onClick:"/decks",text:"DECKS",buttonStyle:"medium"})]}),Object(x.jsx)("div",{className:"infoRow",children:Object(x.jsx)("p",{onMouseDown:()=>{e.current&&(e.current.className="shown")},children:"How to play"})}),Object(x.jsxs)("div",{ref:e,className:"hidden",id:"HowToPlayPopup",children:[Object(x.jsx)("div",{id:"PopupBackground"}),Object(x.jsxs)("div",{id:"HowToPlayPopupBubble",children:[Object(x.jsx)("h1",{children:"Welcome to Epic Fantasy Chess!"}),Object(x.jsx)("p",{children:"Chess, but with a twist - or several!"}),Object(x.jsxs)("div",{className:"left section",children:[Object(x.jsx)("div",{id:"ScatteredPieces",children:Object(x.jsx)("img",{src:P})}),Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("h2",{children:"Choose your pieces!"}),Object(x.jsx)("p",{children:"You can build armies from regular chess pieces, plus some fairy ones!"}),Object(x.jsx)("p",{children:"Try out different armies to see what works for your style."}),Object(x.jsxs)("p",{children:["If you see a piece in game and don't know what it does, ",Object(x.jsx)("b",{children:"right-click"})," to find out more!"]})]})]}),Object(x.jsxs)("div",{className:"right section",children:[Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("h2",{children:"Play Cards!"}),Object(x.jsxs)("p",{children:["Instead of making a move, you can instead ",Object(x.jsx)("b",{children:"Play Cards!"})," Cards can affect the board, move pieces, or even summon new ones!"]}),Object(x.jsxs)("p",{children:["Cards can be played once their ",Object(x.jsx)("b",{children:"Chaos Score"})," has been reached - after that many points worth of pieces have been captured!"]}),Object(x.jsxs)("p",{children:["Be careful, however - they ",Object(x.jsx)("b",{children:"can't be played while in check!"})]}),Object(x.jsxs)("p",{children:["Some cards are ",Object(x.jsx)("b",{children:"fast"}),". This means you can play them without ending your turn - so you can play another, or make a regular move!"]})]}),Object(x.jsx)("div",{id:"ScatteredCards",children:Object(x.jsx)("img",{src:R})})]}),Object(x.jsxs)("div",{className:"left",children:[Object(x.jsx)("h2",{children:"Pre-made or Customised!"}),Object(x.jsxs)("p",{children:["There are a few ",Object(x.jsx)("b",{children:"pre-made"})," decks and armies for you to try out, or you can make your own with any combination you wish!"]}),Object(x.jsxs)("p",{children:["The ",Object(x.jsx)("b",{children:"FIDE"})," army uses regular pieces, and their deck is ",Object(x.jsx)("b",{children:"balanced"})," with cards to ",Object(x.jsx)("b",{children:"move, promote"})," or even ",Object(x.jsx)("b",{children:"demote"})," pieces!"]}),Object(x.jsxs)("p",{children:["The ",Object(x.jsx)("b",{children:"Colourbound Crusaders"})," use strong pieces stuck on a single colour - with cards to ",Object(x.jsx)("b",{children:"maneuver"})," the board and ",Object(x.jsx)("b",{children:"limit"})," your opponent's choices!"]})]}),Object(x.jsx)("div",{className:"thin",children:Object(x.jsx)(u.a,{buttonStyle:"medium",onClick:()=>{e.current&&(e.current.className="hidden")},text:"Cool!"})})]})]})]})}a(108);var I=a(10);function L(){const e=e=>{let t=localStorage.getItem(p.b);if(t){let a=JSON.parse(t);a[e]&&delete a[e],localStorage.setItem(p.b,JSON.stringify(a)),window.location.reload()}};return Object(x.jsxs)("div",{id:"DecksPage",className:"paddedTop",children:[Object(x.jsx)(d.a,{}),Object(x.jsx)("h1",{className:"pageHeading",children:"Your Decks"}),Object(x.jsx)("p",{className:"pageSubtitle",children:"Where you can view, edit, create and delete decks."}),Object(x.jsx)("p",{className:"pageSubtitle",children:"Click on a deck to edit it, hover over a deck to delete it."}),Object(x.jsx)("div",{className:"decksButtonRow",children:Object(x.jsx)(u.a,{onClick:()=>(()=>{let e=localStorage.getItem(p.b),t="";if(e){let a=JSON.parse(e);for(t=prompt("Enter a name for your deck","My Deck")||"My Deck";a[t];)t=prompt("That name has already been chosen")||"My Deck";let n=Object.assign({[t]:new j.c([],t)},a);localStorage.setItem(p.b,JSON.stringify(n))}else{t=prompt("Enter a name for your deck","My Deck")||"My Deck";let e={[t]:new j.c([],t)};localStorage.setItem(p.b,JSON.stringify(e))}window.location.href="/decks/".concat(t)})(),text:"NEW DECK",buttonStyle:"small"})}),Object(x.jsx)("div",{className:"decksListing",children:(()=>{let e=[],t=localStorage.getItem(p.b);if(t){let a=JSON.parse(t);Object.keys(a).map((t=>e.push(a[t])))}return e})().map((t=>Object(x.jsx)(F,{deck:t,deleteDeck:e})))})]})}function F(e){let{deck:t,deleteDeck:a}=e;const n=e=>t.cards.filter((t=>t===e)).length;return Object(x.jsxs)("div",{className:"deckPreview",onClick:()=>window.location.href="/decks/".concat(t.name),children:[Object(x.jsx)("div",{className:"delete",onClick:e=>{e.stopPropagation(),a(t.name)},children:"\u2716"}),Object(x.jsx)("h3",{className:"DeckName",children:t.name}),Object(x.jsxs)("div",{className:"cards",children:[t.cards.filter(((e,t,a)=>a.indexOf(e)===t)).filter(((e,t)=>t<=3)).map((e=>Object(x.jsxs)("p",{children:[I.a[e].cardName||"name error"," x",n(e)]}))),t.cards.filter(((e,t,a)=>a.indexOf(e)===t)).length>4?Object(x.jsx)("p",{children:Object(x.jsx)("i",{children:"Click to view more"})}):null]})]})}a(109);function A(){let{deckId:e}=Object(c.h)(),[t,a]=Object(n.useState)(""),[i,s]=Object(n.useState)([]),[r,o]=Object(n.useState)(!1);Object(n.useLayoutEffect)((()=>{let t=localStorage.getItem(p.b);if(t){let n=JSON.parse(t);console.log(n,e),a(n[e].name),s(n[e].cards)}else alert("No deck detected. Redirecting to army menu."),window.location.href="./decks"}),[]);let[l,h]=Object(n.useState)(null);const g=(e,t,a)=>{h(a),e.dataTransfer&&(e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="copyMove")},m=()=>{h(null)},b=e=>{if(e.dataTransfer){const t=e.dataTransfer.getData("text/plain");t&&(s("lib"===l?e=>{let a=[...e];return a.push(t),a.sort(((e,t)=>I.a[e].cost-I.a[t].cost))}:e=>{let a=e.indexOf(t);return[...e.slice(0,a),...e.slice(a+1,e.length)]}),h(null),r||o(!0))}},f=e=>i.filter((t=>t===e)).length;return Object(x.jsxs)("div",{id:"DecksBuilderPage",className:"paddedTop",children:[Object(x.jsx)(d.a,{}),Object(x.jsx)("h1",{children:e}),Object(x.jsxs)("div",{className:"decksManager",children:[Object(x.jsx)("div",{className:"cardListPreview",children:Object(x.jsxs)("div",{className:"cardListBox",children:[Object(x.jsx)("h2",{className:"cardListingTitle",children:"Decklist"}),[...i].filter(((e,t,a)=>a.indexOf(e)===t)).map(((e,t)=>Object(x.jsxs)("div",{className:"listedCard",draggable:!0,onDragStart:t=>g(t,e,"list"),onDragEnd:m,children:[Object(x.jsxs)("span",{className:"chaosValue",children:["(",I.a[e].cost,")"]}),Object(x.jsx)("span",{className:"cardName",children:I.a[e].cardName}),Object(x.jsxs)("span",{className:"cardQuantity",children:["x",f(e)]})]}))),Object(x.jsxs)("div",{className:"counter",children:[i.length,"/15"]}),"lib"!==l?null:Object(x.jsx)("div",{className:"libDragReceiverOuter",onDrop:b,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},children:Object(x.jsx)("div",{className:"dragHereNotice",children:"Drag here to add a card to your deck"})})]})}),Object(x.jsx)("div",{className:"cardsList",children:Object(x.jsxs)("div",{className:"cardLibrary",children:[Object.values(I.a).map(((e,t)=>Object(x.jsxs)("div",{className:"libraryCard ".concat(f(e.id)>=2?"disabled":""),draggable:f(e.id)<2,onDragStart:t=>g(t,e.id,"lib"),onDragEnd:m,children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"cardChaosScore",children:[Object(x.jsx)("div",{className:"score",children:e.cost}),Object(x.jsx)("div",{className:"speed",children:e.fast?"Fast":""})]}),Object(x.jsx)("div",{className:"cardTitle",children:e.cardName}),Object(x.jsx)("div",{className:"cardDescription",children:e.description}),Object(x.jsx)("div",{className:"cardExpac",children:e.expac})]}),f(e.id)>=2?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"limitReached limitBackground"}),Object(x.jsx)("div",{className:"limitReached limitText",children:"Maximum number of copies reached"})]}):null]}))),"list"!==l?null:Object(x.jsx)("div",{className:"listDragReceiver",onDrop:b,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},children:Object(x.jsx)("div",{className:"dragHereNotice",children:"Drag here to remove a card from your deck"})})]})})]}),r?Object(x.jsx)("div",{className:"saveChanges",children:Object(x.jsx)(u.a,{onClick:()=>{let e=!0;15!==i.length&&(e=window.confirm("Your deck has an improper number of cards - you won't be able to play with it. Are you sure you want to continue?"));let a=localStorage.getItem(p.b);if(a&&e){let e=JSON.parse(a),n=prompt("Choose your deck's name",t)||t;n!==t&&delete e[t],e[n]=new j.c(i,n),localStorage.setItem(p.b,JSON.stringify(e)),window.location.href="/decks"}},text:"Save Changes"})}):null]})}function H(){const{url:e}=Object(c.i)();return Object(x.jsxs)(c.c,{children:[Object(x.jsx)(c.a,{path:"".concat(e),exact:!0,children:Object(x.jsx)(L,{})}),Object(x.jsx)(c.a,{path:"".concat(e,"/:deckId"),children:Object(x.jsx)(A,{})})]})}function V(){let e=Object(c.g)();Object(n.useLayoutEffect)((()=>{e.pathname.startsWith("/play/game/")&&e.pathname.length>11?document.body.style.overflow="hidden":document.body.style.overflow="auto"}),[e]);const t=Object(n.useRef)(new RTCPeerConnection(v.a));t.current.onconnectionstatechange=()=>r(t.current.connectionState);const[a,i]=Object(n.useState)(null),[s,r]=Object(n.useState)("Not Connected");return Object(x.jsx)(v.b.Provider,{value:{Conn:t.current,Channel:a,initChannel:e=>{if(e)console.log("Adding remote channel ".concat(e.id)),console.log("Current channel: \n",a),console.log("Received channel: \n",e),i(e),console.log("Added remote channel: \n ",a);else{let e=t.current.createDataChannel("data channel");i(e),console.log("Created channel "+e.id)}let n=null===a||void 0===a?void 0:a.id;a&&(a.onopen=()=>{console.log("Data channel ".concat(null===a||void 0===a?void 0:a.id," opened!"))},a.onclose=()=>{console.log("Data channel ".concat(n," closed!"))},a.onmessage=e=>{console.log("MESSAGE RECEIVED on channel ".concat(n," (Currently listening on ").concat(null===a||void 0===a?void 0:a.id,":"),e)})},setListener:e=>{a?(a.onmessage=e,console.log("Updated event listener")):console.log("Tried to attach listener but no data channel exists.")}},children:Object(x.jsxs)(c.c,{children:[Object(x.jsx)(c.a,{path:"/",exact:!0,children:Object(x.jsx)(B,{})}),Object(x.jsx)(c.a,{path:"/play",children:Object(x.jsx)(T,{})}),Object(x.jsx)(c.a,{path:"/armies",children:Object(x.jsx)(E,{})}),Object(x.jsx)(c.a,{path:"/decks",children:Object(x.jsx)(H,{})})]})})}r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(f.a,{children:Object(x.jsx)(V,{})})}),document.getElementById("root")),o()}],[[110,1,2]]]);
//# sourceMappingURL=main.cf3648e5.chunk.js.map